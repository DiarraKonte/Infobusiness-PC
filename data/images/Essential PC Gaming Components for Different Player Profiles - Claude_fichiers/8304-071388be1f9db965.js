"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8304],{12099:function(e,t,n){n.d(t,{Ml:function(){return r},Vl:function(){return o}});var a=n(5362),s=n(27218),l=n(87033),i=n(58183);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.FL)("chat_suggestion_chips_enabled"),n=e.get("chat_suggestion_chips",!1);return t||n}function o(e){let{mutateAsync:t,enabled:n}=function(){let{activeOrganization:e}=(0,s.t)(),{value:t}=(0,l.FL)("chat_autocomplete"),n=(0,a.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:n.mutateAsync,isPending:n.isPending,isIdle:n.isIdle,enabled:t}}();return{fetchInputAutocompletion:async a=>{if(!n||!e)return"";let[s,l]=(await t({conversationUUID:null!=e?e:"",prompt:a})).prompt.split("\n").map(e=>e.trim());return"Yes"===s?" "===a[a.length-1]?l||"":" "+(l||""):"No"===s&&l||""}}}},61377:function(e,t,n){n.d(t,{F4:function(){return d}});var a=n(5362),s=n(27218),l=n(13262),i=n(10228),r=n(2949);let o=e=>[i.co.CREATED,i.co.PENDING,i.co.UPDATING].includes(e),d=()=>{let e=(0,r.EU)(),t=(0,r.r7)(),n=(0,r.ez)(),{data:a}=c(i.Fg.GDRIVE),s=null==a?void 0:a.state;return!!(e&&t&&n&&s&&[i.co.CREATED,i.co.UPDATING,i.co.PENDING].includes(s))},c=e=>{let{account:t,activeOrganization:n}=(0,s.t)(),i=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid;return(0,a.WE)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.dY,{orgUuid:r,accountUuid:i,syncSourceType:e}],enabled:!!n,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},35102:function(e,t,n){n.d(t,{B4:function(){return r},i7:function(){return o},jL:function(){return i}});var a=n(87033),s=n(7653);let l=(0,s.createContext)({enabled:!1,sharedResources:{},selectedResource:null,setSelectedResource:()=>void 0,isActive:!1,orgUuid:""}),i=()=>{var e;return null!==(e=(0,s.useContext)(l).enabled)&&void 0!==e&&e},r=()=>(0,s.useContext)(l).isActive,o=()=>(0,a.FL)("claudeai_tiny_pancakes").value},21878:function(e,t,n){n.d(t,{K:function(){return i}});var a=n(19170),s=n(27218),l=n(7653);function i(){let{mutate:e,isPending:t}=(0,a.Ck)(),{account:n}=(0,s.t)();return{dismiss:(0,l.useCallback)(t=>{var a;n&&e({...n.settings,dismissed_claudeai_banners:[...(null==n?void 0:null===(a=n.settings)||void 0===a?void 0:a.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]})},[n,e]),isDismissed:(0,l.useCallback)(e=>{var t,a;return(null==n?void 0:null===(a=n.settings)||void 0===a?void 0:null===(t=a.dismissed_claudeai_banners)||void 0===t?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},8304:function(e,t,n){n.d(t,{x:function(){return am}});var a,s,l,i,r,o,d=n(41596),c=n(27573),u=n(9788),m=n(69321),x=n(87033),p=n(10607),f=n(8927),h=n(68425),g=n(7653),v=n(40950),y=n(77879),j=n(66605),b=n(12099),w=n(30575),M=n(16282),k=n(69735),N=n(89799);let C=e=>{let{attachments:t,files:n,syncSourceResults:a,onRemoveAttachment:s,onRemoveFile:l,onRemoveSyncSource:i,isUploadingFile:r,isUploadingSync:o}=e;return(0,c.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,c.jsx)(M.mB,{file:e,size:"md",onRemoveFile:()=>s(t),isEditable:!0},t)),n.map((e,t)=>(0,c.jsx)(M.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>l(t),isEditable:!0},e.file_uuid)),(0,c.jsx)(k.fz,{isShown:r}),a.map(e=>{let{syncSource:t,uuid:n}=e;return(0,c.jsx)(N.Q,{uuid:n,syncSource:t,onRemove:()=>i(n),isEditable:!0},n)}),(0,c.jsx)(k.fz,{isShown:o})]})};var _=n(91217),S=n(66551),E=n(71912),Z=n(26525),I=n(27895),T=n(10228),A=n(45790),z=n(2949),D=n(70712),R=n(56767);let O=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n,prompt:a}=(0,_.r)(),s=(0,z.Aj)(),{addError:l}=(0,I.e)(),i=(0,v.Z)(),{mutate:r}=(0,j.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),l((0,R.A)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:o,initDriveAuth:d}=(0,z.nC)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of a.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,D.g)(e);t&&u(t,!0)}}}),u=(0,g.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s||n){if(!o&&!n){l((0,c.jsx)("span",{children:(0,c.jsx)(A.Z,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,c.jsx)("button",{className:"underline",onClick:d,children:e})}})}));return}if(t){l(i.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:Z.Qe}));return}r({sync_source_type:T.Fg.GDRIVE,sync_source_config:{uri:e}})}},[s,o,t,r,d,l,i]);return u};var L=n(87683),F=n(5362),P=n(27218),U=n(45144),G=n(71817);let H=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,_.r)(),{failedStreamRetryData:a,setFailedStreamRetryData:s}=(0,G.Qk)();(0,g.useEffect)(()=>{null!==a&&(e(a.prompt),t(a.attachments),n(a.files),s(null))},[a,t,s,n,e])};var B=n(89313),K=n(53949),V=n(35102),Y=n(76220),W=n(23098);let q=e=>{var t,n;let{model:a,projectUuid:s}=e,{allModelOptions:l}=(0,Y.uL)(),i=(0,W.nR)(s),r=(0,W.PE)(s),o=null!==(n=null===(t=l.find(e=>e.model===a))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==n?n:155e3,d=!r&&(null!=i?i:0)>o?(0,c.jsx)("div",{className:"max-md:hidden",children:(0,c.jsx)(A.Z,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,c.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=d?d:void 0})};var J=n(6766),Q=n(70354),X=n(45033),$=n(32737),ee=n(1133),et=n(85689),en=n(96346),ea=n(37141),es=n(81695),el=n(1445),ei=n(30131);let er=()=>{let{allModelOptions:e}=(0,Y.uL)();return t=>{var n;let a=e.find(e=>e.model===t);return!!(null==a?void 0:null===(n=a.paprika_modes)||void 0===n?void 0:n.includes("extended"))}},eo=()=>!!(0,ei.lE)().length;var ed=n(85465),ec=n(52165),eu=n(22235);function em(){let e=(0,d._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  font-medium\n  max-md:absolute\n  max-md:top-1.5\n  max-md:left-2\n  max-md:mt-px\n"]);return em=function(){return e},e}function ex(){let e=(0,d._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return ex=function(){return e},e}let ep=u.q.div(em()),ef=u.q.div(ex()),eh=(0,c.jsx)(A.Z,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),eg={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},ev=e=>{var t;let{model:n,currentModelOption:a,opensInNewChat:s,onSelect:l,hasMultiModalContent:i,tag:r,tooltip:o}=e,d=function(){let e=(0,v.Z)();return(0,g.useMemo)(()=>({"claude-3-5-haiku-20241022":e.formatMessage({defaultMessage:"Fastest model for daily tasks",description:"A description of the AI model",id:"75wJbzj8Tm"}),"claude-3-7-sonnet-20250219":e.formatMessage({defaultMessage:"Our most intelligent model yet",description:"A description of the AI model",id:"WW0Apyq96E"})}),[e])}(),u=n.model===(null==a?void 0:a.model),m=(0,eu.g)(n.name,n.model,i);return(0,c.jsx)($.u,{tooltipContent:o,side:"right",children:(0,c.jsxs)(X.hP,{onClick:()=>{u||l(n)},className:(0,p.Z)("group pr-1 py-1.5"),children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-1 text-sm",children:(0,c.jsx)("div",{className:"flex items-center gap-1.5",children:(0,c.jsx)("div",{children:m})})}),r&&!u&&(0,c.jsx)(ep,{children:r}),!u&&s&&!r&&(0,c.jsx)(ef,{children:(0,c.jsx)(A.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,c.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:null!==(t=d[n.model])&&void 0!==t?t:n.description})]}),u&&(0,c.jsx)(et.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},ey=e=>{let{models:t,currentModelOption:n,opensInNewChat:a,redirectToUpgradePro:s,handleModelSelect:l,hasMultiModalContent:i,upsellMode:r}=e,o=(0,g.useMemo)(()=>({}),[]),d=e=>{var t;return r&&e.model!==(null==n?void 0:n.model)?eh:null!==(t=o[e.model])&&void 0!==t?t:e.notice_text};return(0,c.jsx)(c.Fragment,{children:t.map(e=>(0,c.jsx)(ev,{model:e,currentModelOption:n,opensInNewChat:a,onSelect:r?s:l,hasMultiModalContent:i,tag:r&&e.model!==(null==n?void 0:n.model)?"PRO":void 0,tooltip:d(e)},e.model))})},ej=e=>{let{selectedModel:t,conversationUUID:n,onSelect:a,placement:s,hasMultiModalContent:l,open:i,onOpenChange:r,isNewConversation:o,hideModelNameLogo:d}=e,u=!o,m=(0,es.useRouter)(),{allModelOptions:f,mainModels:v,overflowModels:y}=(0,Y.uL)(),j=(0,G.wN)(n||null),b=null!=t?t:j,w=(0,g.useRef)(null),M=(0,ed.gE)("paprika_mode"),k=er(),N=(0,el.wH)(),{toggleConversationSetting:C}=(0,ed.M0)(),_=f.find(e=>e.model===b);_||(_=eg);let{value:S}=(0,x.FL)("model_selector_enabled"),E=(0,P.rW)(),Z=!S&&!E,{setStickyModelPreference:I}=(0,J.M)(),[T,z]=(0,g.useState)(!1),D=()=>{m.push("/upgrade/pro")},R=e=>{S&&(M&&!k(e.model)&&C("paprika_mode",null),N(e.model)||C("compass_mode",null),I(e.model),a(e))};return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(X.Lt,{className:(0,p.Z)("!min-w-[17rem] relative"),..."bottom"===s?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:i,onOpenChange:e=>{r&&r(e),e||z(!1)},trigger:(0,c.jsx)(h.E.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,c.jsxs)(Q.z,{ref:w,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,p.Z)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1 sm:pl-1.5 sm:pr-1 sm:pt-1 hover:bg-bg-100 hover:border-border-400"),children:[(0,c.jsx)(ec.u,{model:_,hasMultiModalContent:l,hideModelNameLogo:d}),(0,c.jsx)(en.p,{size:12,className:"text-text-500 shrink-0"})]})}),children:[(0,c.jsx)(ey,{models:v,currentModelOption:_,opensInNewChat:u,redirectToUpgradePro:D,handleModelSelect:R,hasMultiModalContent:l,upsellMode:Z}),y.length>0&&((0,ee.tq)()?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.u2,{}),(0,c.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,c.jsx)(A.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,c.jsx)(ey,{models:y,currentModelOption:_,opensInNewChat:u,redirectToUpgradePro:D,handleModelSelect:R,hasMultiModalContent:l,upsellMode:Z})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.u2,{}),(0,c.jsxs)(X.Vy,{children:[(0,c.jsxs)(X.WR,{className:"pl-2 py-1.5 gap-2",children:[(0,c.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,c.jsx)(A.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,c.jsx)(ea.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,c.jsx)(X.nI,{children:(0,c.jsx)(X.A2,{sideOffset:4,children:(0,c.jsx)("div",{className:"overflow-y-scroll max-h-80",children:(0,c.jsx)(ey,{models:y,currentModelOption:_,opensInNewChat:u,redirectToUpgradePro:D,handleModelSelect:R,hasMultiModalContent:l,upsellMode:Z})})})})]})]}))]})})};var eb=n(45783),ew=n(78636),eM=n(98649),ek=n(87801),eN=n(95440),eC=n(35919),e_=n.n(eC),eS=n(53392),eE=n(32006),eZ=n(20253),eI=n(58183),eT=n(51375),eA=n(19132),ez=n(46200),eD=n(40051);let eR=()=>{let{servers:e}=(0,eT.cH)();return e.length>0},eO=()=>{let e=(0,P.rW)(),t=(0,ez.uH)(),n=eR();return!e&&!t&&!n},eL=()=>{let e=(0,P.rW)(),t=eR();return e||t},eF="inputMenu",eP=()=>({isDisabled:!0,tooltip:(0,v.Z)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),eU=e=>{let{actions:t}=e,{conversation:n,model:a}=(0,_.r)(),s=(0,G.wN)((null==n?void 0:n.id)||null),l=null!=a?a:s,i=eG({actions:t,currentModel:l}),r=eJ(),o=eY({actions:t}),d=eW({actions:t}),c=eq({currentModel:l});if(eO())return o;let u=[...d?[d]:[],...c?[c]:[]];return i.length&&(u=u.concat([...u.length?[{key:"divider1",type:"divider",label:""}]:[],...i])),r.length&&(u=u.concat([...u.length?[{key:"divider2",type:"divider",label:""}]:[],...r])),u},eG=e=>{let{actions:t,currentModel:n}=e,a=eH({currentModel:n}),s=eB({currentModel:n}),l=eV({actions:t,currentModel:n}),i=eK({currentModel:n});return[...a?[a]:[],...s?[s]:[],...l?[l]:[],...i?[i]:[]]},eH=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:a}=(0,_.r)(),s=(0,ez.j9)(t),l=(0,ez.uH)(),i=(0,ez.FD)(),r=(0,ez.qS)(a),{toggleConversationSetting:o}=(0,ed.M0)(),d=eP(),u=eQ("web_search");if(!l)return null;let m=r&&s;return{key:"webSearch",type:"switch",label:n.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,c.jsx)(ew.TH,{size:18,className:"-m-[1px]"}),isChecked:m,onClick:()=>o("enabled_web_search",!m),tag:u,...i?s?null:d:{isDisabled:!0,tooltip:n.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}}},eB=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:a}=(0,_.r)(),{toggleConversationSetting:s}=(0,ed.M0)(),l=(0,z.ez)(),i=(0,Y.E6)()(t,"gsuite_tools"),r=(0,z.EU)(a),{isDriveAuthenticated:o,initDriveAuth:d}=(0,z.nC)({callerIdentifier:eF,handleAuthSuccess:()=>{s("enabled_bananagrams",!0)}}),u=eP(),m=eQ("drive_search");if(!l)return null;let x={key:"driveSearch",icon:(0,c.jsx)(eE.k6,{size:16}),label:n.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!o)return{...x,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:d,...i?null:u};let p=o&&r;return{...x,type:"switch",isChecked:p,onClick:()=>{s("enabled_bananagrams",!p)},tag:m,...i?null:u}},eK=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:a}=(0,_.r)(),{toggleConversationSetting:s}=(0,ed.M0)(),l=(0,eA.te)(T.Fg.GCAL),i=(0,Y.E6)()(t,"gsuite_tools"),r=(0,eA.j5)(T.Fg.GCAL,a),{isAuthenticated:o,startAuth:d}=(0,eA.QD)(T.Fg.GCAL,{callerIdentifier:eF,handleAuthSuccess:()=>{s("enabled_foccacia",!0)}}),u=eP(),m=eQ("calendar_search");if(!l)return null;let x={key:"gcal",label:n.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,c.jsx)(eE.tB,{size:16})};if(!o)return{...x,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:d,...i?null:u};let p=o&&r;return{...x,type:"switch",isChecked:p,onClick:()=>{s("enabled_foccacia",!p)},tag:m,...i?null:u}},eV=e=>{let{actions:t,currentModel:n}=e,a=(0,v.Z)(),{conversation:s}=(0,_.r)(),{toggleConversationSetting:l}=(0,ed.M0)(),i=(0,eA.te)(T.Fg.GMAIL),r=(0,Y.E6)()(n,"gsuite_tools"),o=(0,eA.j5)(T.Fg.GMAIL,s),d=eP(),u=eQ("gmail_search"),{isAuthenticated:m}=(0,eA.QD)(T.Fg.GMAIL,{callerIdentifier:eF,handleAuthSuccess:()=>{l("enabled_sourdough",!0)}});if(!i)return null;let x={key:"gmail",label:a.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,c.jsx)(eE.W9,{size:16})};if(!m)return{...x,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()},...r?null:d};let p=m&&o;return{...x,type:"switch",isChecked:p,onClick:()=>{l("enabled_sourdough",!p)},tag:u,...r?null:d}},eY=e=>{let{actions:t}=e,n=(0,v.Z)(),{personalizedStyle:a}=(0,_.r)(),{personalizedStyleOptions:s}=(0,eD.O)();return[...s.map(e=>{let n=(null==a?void 0:a.key)===e.key;return{key:e.key,type:"option",label:e.name,icon:(0,c.jsx)(ew.z0,{size:18,className:"-m-[1px]"}),onClick:()=>{n?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:n}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,c.jsx)(ew.v3,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},eW=e=>{let{actions:t}=e,n=(0,v.Z)(),a=eL(),{personalizedStyle:s}=(0,_.r)(),l=eY({actions:t}),i=n.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:eM.Mm.STYLES,type:"optionGroup",icon:(0,c.jsx)(ew.z0,{size:18,className:"-m-[1px]"}),label:i,secondaryText:(null==s?void 0:s.isDefault)?void 0:null==s?void 0:s.name,children:[...a?[]:[{type:"back",key:"styles-back",label:i}],...l],indicatorActive:s&&"Default"!==s.key}},eq=e=>{let{currentModel:t}=e,n=(0,v.Z)(),a=(0,ed.gE)("paprika_mode"),s=eo(),l=er()(t),{toggleConversationSetting:i}=(0,ed.M0)(),{value:r}=(0,x.FL)("model_selector_enabled"),o=eP();if(!s||!r)return null;let d=n.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),u={key:eM.Mm.EXTENDED_THINKING,type:"switch",label:n.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),icon:(0,c.jsx)(ew.U,{size:18,className:"-m-[1px]"}),isChecked:!!a,indicatorActive:!!a};return l?{...u,onClick:()=>{i("paprika_mode",a?null:"extended")},tooltip:d,tooltipImage:"/images/feature-preview/extended-thinking.png"}:{...u,...o}},eJ=()=>{var e;let t=(0,v.Z)(),{servers:n}=(0,eT.cH)(),a=null!==(e=(0,ed.gE)("enabled_mcp_tools"))&&void 0!==e?e:{},{toggleMcpToolEnabled:s}=(0,eT.$Y)(),l=(0,eT.si)();return n.map(e=>{let n={key:e.uuid,label:e.name,icon:(0,c.jsx)(eS._,{letter:e.name,size:16})};if(!e.isConnected&&!e.isAuthless&&!e.isLoading)return{...n,type:"button",isExternal:!0,secondaryText:t.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>l(e)};let i=e.tools.map(t=>{let n=(0,eT.q)(e.uuid,t.name),l=!1!==a[n];return{key:n,type:"switch",label:t.name,icon:(0,c.jsx)(eS._,{letter:t.name,size:16}),isChecked:l,onClick:()=>{s(n,!l)}}}),r=i.filter(e=>"switch"===e.type&&e.isChecked).length,o=r>0;return i.length>1?i.unshift({key:"select-all",type:"switch",label:o?t.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):t.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),icon:(0,c.jsx)(eS.e,{letter:e.tools[0].name,size:16}),onClick:()=>{s(e.tools.map(t=>(0,eT.q)(e.uuid,t.name)),!o)},isChecked:o,skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}):0===i.length&&i.push({key:"empty",type:"button",label:t.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,c.jsx)(eZ.V,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...n,type:"toggleGroup",enabledCount:r,children:i}})},eQ=e=>(0,eI.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0;var eX=n(88755),e$=n(43311),e0=n(76203),e1=n(32559),e2=n(89111),e5=n(95586),e3=n(38622);let e7=e=>{let{actions:t,inputMenuIsOpen:n}=e,a=(0,v.Z)(),s=e4({actions:t}),l=e9({actions:t}),i=e6({actions:t,inputMenuIsOpen:n}),r=e8({actions:t,inputMenuIsOpen:n}),o=te({actions:t});return[{key:eM.Mm.UPLOAD,type:"button",icon:(0,c.jsx)(ew.Pg,{size:18,className:"-m-[1px]"}),label:a.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:t.onUpload},...s?[s]:[],...l?[l]:[],...i?[i]:[],...o,...r?[{key:"divider1",type:"divider",label:""},r]:[]]},e4=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,eX.Q)()||(0,ee.r3)()?null:{key:eM.Mm.ADD_SCREENSHOT,type:"button",icon:(0,c.jsx)(ew.V1,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}},e8=e=>{let{inputMenuIsOpen:t,actions:n}=e,a=(0,v.Z)(),s=eL(),{projectUuid:l,isProjectLocked:i}=(0,_.r)(),r=(0,e5.U)(),{data:o}=(0,e1.O3)({enabled:t&&r}),d=(null==o?void 0:o.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>n.onSelectProject(e.uuid),icon:(0,c.jsx)(ew.pj,{size:18,className:"-m-[1px]"}),isChecked:e.uuid===l})))||[],u=null==o?void 0:o.find(e=>e.uuid===l);if(i||!r)return null;let m=a.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:eM.Mm.PROJECTS,type:"optionGroup",icon:(0,c.jsx)(ew.pj,{size:18,className:"-m-[1px]"}),label:m,secondaryText:null==u?void 0:u.name,children:[...s?[]:[{type:"back",key:"projects-back",label:m}],...d,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,c.jsx)(ew.v3,{size:18,className:"-m-[1px]"}),label:a.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>n.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!u}},e6=e=>{let{actions:t,inputMenuIsOpen:n}=e,a=(0,v.Z)(),s=eL(),l=(0,z.Aj)(),{isDriveAuthenticated:i,initDriveAuth:r}=(0,z.nC)(),{recentDriveDocs:o,isLoading:d}=(0,z.td)(n);if(!l)return null;let u=a.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),m={key:eM.Mm.DRIVE,icon:(0,c.jsx)(eE.j0,{type:T.Fg.GDRIVE,size:16}),label:u};if(!i)return{...m,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:r};let x=d?[{key:"drive-loading",type:"button",label:a.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:o.length?o.slice(0,8).map(e=>{var n;return{key:e.uri,type:"button",label:null!==(n=e.title)&&void 0!==n?n:"Untitled",icon:(0,c.jsx)(eE.j0,{type:T.Fg.GDRIVE,variant:eE.cT.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:a.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...m,type:"buttonGroup",children:[...s?[]:[{type:"back",key:"drive-back",label:u}],...x]}},e9=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,e2.H7)()?{key:eM.Mm.GITHUB,type:"button",icon:(0,c.jsx)(eE.j0,{type:T.Fg.GITHUB,size:16}),label:n.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null},te=e=>{let{actions:t}=e,n=(0,v.Z)(),{servers:a}=(0,eT.cH)(),s=(0,e3.ff)(),l=(0,e3.Vr)();return a.filter(e=>e.client&&(e.prompts.length>0||e.resources.length>0)).map(e=>{let a=e.prompts.map(n=>({key:"prompt-".concat(e.name,"-").concat(n.name),type:"button",icon:(0,c.jsx)(e$.N,{size:16}),label:n.name,onClick:()=>{var a;return(null===(a=n.arguments)||void 0===a?void 0:a.length)?t.onEnterPromptArguments(e.client,n):void l(e.client,n,{})}})),i=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,c.jsx)(e0.$,{size:16}),label:t.name,onClick:()=>void s(e.client,t)}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:n.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,c.jsx)(eS._,{letter:e.name,size:16}),children:[...a,...i]}})};async function tt(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let a=document.createElement("video");a.srcObject=t,await new Promise((e,t)=>{a.onloadedmetadata=()=>{a.play().then(e,t)}});let s=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(a.videoWidth,e.width),e.height/Math.min(a.videoHeight,e.height));s.width=a.videoWidth*t,s.height=a.videoHeight*t}else s.width=a.videoWidth,s.height=a.videoHeight;let l=s.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(a,0,0,s.width,s.height);let i=s.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}var tn=n(3053);(a=i||(i={})).CREATE="create",a.CREATE_MANUALLY="create_manually",a.LIST="list",a.EDIT="edit";var ta=n(4746);function ts(e){return"default"===e.type?e.key:e.uuid}let tl=e=>{let{setStyleModalOpenWithScreen:t,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:a,setGmailAuthModalIsOpen:s,setCreatePromptArgumentModalIsOpen:l}=e,r=td(),o=tc(),d=to(),{openFeaturePreviewModal:c}=(0,ta.h9)(),{checkIsGithubAuthenticated:u,initGithubAuth:m}=(0,e2.Yn)(),{initDriveAuth:x}=(0,z.nC)();return{onUpload:tr,onAddScreenshot:()=>{r()},openGithubModal:()=>{u().then(e=>{if(!e){m();return}a(!0)})},openGmailAuthModal:()=>{s(!0)},initDriveAuth:x,createDriveSyncSource:ti(),onStyleChange:e=>{o(e)},openStyleModal:()=>{t(i.LIST)},onSelectProject:d,onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:c,onEnterPromptArguments:(e,t)=>{l({isOpen:!0,client:e,prompt:t})}}},ti=()=>{let{addError:e}=(0,I.e)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:n}=(0,_.r)(),{mutate:a}=(0,j.cE)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),n(t=>[...t,e.uuid])},onError:n=>{t(!1),e((0,R.A)(n))},meta:{noToast:!0}});return e=>a({sync_source_type:T.Fg.GDRIVE,sync_source_config:{uri:e}})},tr=()=>{var e;null===(e=document.getElementById("chat-input-file-upload"))||void 0===e||e.click()},to=()=>{let{projectUuid:e,setProjectUuid:t}=(0,_.r)();return n=>{e===n?t(void 0):t(n)}},td=()=>{let{addError:e}=(0,I.e)(),t=(0,v.Z)(),{handleUpload:n}=(0,_.r)();return async()=>{let a=null;try{a=await tt({width:1568,height:1568})}catch(n){(0,U.Tb)(n),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!a)return;let s=new File([await fetch(a.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await n([s])}},tc=()=>{let{setPersonalizedStyle:e}=(0,_.r)(),t=(0,tn.z$)(),{personalizedStyleOptions:n,setStoredStyle:a}=(0,eD.O)();return s=>{let l=n.find(e=>e.key===s);if(!l)return;e(l);let i=ts(l);a({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}},tu="chat-input-menu-search-input",tm=()=>{if((0,ee.r3)())return;let e=document.getElementById(tu);e&&e.focus()},tx=e=>{let{currentItems:t,inputMenuIsOpen:n,setInputMenuIsOpen:a,inputMenuSearchQuery:s,setInputMenuSearchQuery:l,path:i,handleUpdatePath:r,highlightedItemKey:o,setHighlightedItemKey:d}=e,c=(0,es.useRouter)(),u=(0,g.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)a(!0),r(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null===(t=e.onClick)||void 0===t||t.call(e)}},[a,r]),m=(0,g.useCallback)(e=>{i&&(null==e||e.preventDefault(),r(null),d(i),tm())},[i,d,r]),x=(0,g.useCallback)(e=>{let n;let a=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),s=a.findIndex(e=>{let{key:t}=e;return t===o});n="ArrowUp"===e?s>0?s-1:a.length-1:s<a.length-1?s+1:0,d(a[n].key)},[t,o,d]),p=(0,g.useCallback)(e=>{var t,s,i;if(!n){u(e);return}if(!e.isDisabled){if("pro"===e.tag){c.push("/upgrade/pro");return}if(l(""),"back"===e.type){m();return}if("button"===e.type){null===(t=e.onClick)||void 0===t||t.call(e),e.skipCloseOnClick||a(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){r(e.key),d(null),tm();return}"option"!==e.type||(null===(s=e.onClick)||void 0===s||s.call(e),e.skipCloseOnClick||a(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null===(i=e.onClick)||void 0===i||i.call(e),tm())}},[m,u,r,n,l,c,a,d]),f=(0,g.useCallback)((e,n)=>{if(!o)return;let a=t.find(e=>{let{key:t}=e;return t===o});a&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(a.type))&&(n.preventDefault(),p(a))},[o,t,p]);return(0,g.useEffect)(()=>{if(!n)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),a(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?f(e.key,e):"ArrowLeft"!==e.key||s||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,a,s,x,f,m]),{handleClickItem:p,handleBack:m}};var tp=n(67578),tf=n(86973),th=n(29860),tg=n.n(th);let tv={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},ty=e=>{let{actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:a,pathItems:s,path:l,menuType:i}=e,r=(0,v.Z)(),o=(0,g.useRef)(n),{handleSearchDrive:d,searchedDriveItems:u}=tw({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:a,menuType:i}),{handleSearchProjects:m,searchedProjectItems:x}=tb({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:a,menuType:i,pathItems:s}),{handleFilterMenuItems:p,filteredMenuItems:f}=tj({path:l,inputMenuSearchQuery:n,pathItems:s}),h=(0,g.useCallback)(()=>{p(),m(),d()},[p,m,d]),y=(0,g.useMemo)(()=>tg()(()=>{h()},100),[h]);return((0,g.useEffect)(()=>{if(n&&a&&n!==o.current)return o.current=n,y(),()=>{y.cancel()}},[a,n,y]),f.length||x.length||u.length)?[f,x,u].reduce((e,t,n)=>[...e,...e.length&&t.length?[{key:"divider".concat(n+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:r.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,c.jsx)(tp.Y,{size:18}),onClick:()=>void 0,isDisabled:!0}]},tj=e=>{let{path:t,inputMenuSearchQuery:n,pathItems:a}=e,s=a.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,g.useState)([]);return"projects"!==t&&"drive"!==t?{handleFilterMenuItems:()=>{let e=n.toLowerCase();if(!e)return s;let t=[];for(let e of s)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}:{handleFilterMenuItems:()=>[],filteredMenuItems:[]}},tb=e=>{let{path:t,actions:n,inputMenuSearchQuery:a,inputMenuIsOpen:s,menuType:l,pathItems:i}=e,r="projects",o=(0,e5.U)(),d=(i.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t)&&(t===r||!t)&&s&&o&&"plus"===l,[u,m]=(0,g.useState)([]),{data:x}=(0,e1.O3)({enabled:d}),p=(0,g.useMemo)(()=>new tf.Z(x||[],{...tv,keys:["name","description"]}),[x]);return d?{handleSearchProjects:()=>{let e=a.toLowerCase();if(!e||!x)return[];m(p.search(e,{limit:t===r?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,c.jsx)(ew.pj,{size:18}),onClick:()=>n.onSelectProject(e.item.uuid)})))},searchedProjectItems:u}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},tw=e=>{let{path:t,actions:n,inputMenuSearchQuery:a,inputMenuIsOpen:s,menuType:l}=e,i="drive",r=(t===i||!t)&&s&&"plus"===l,o=(0,z.Aj)(),[d,u]=(0,g.useState)([]),{recentDriveDocs:m}=(0,z.td)(r),x=(0,g.useMemo)(()=>new tf.Z(m,{...tv,keys:["title"]}),[m]);return o&&r?{handleSearchDrive:()=>{let e=a.toLowerCase();if(!e||!m)return[];u(x.search(e,{limit:t===i?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,c.jsx)(eE.j0,{type:T.Fg.GDRIVE,variant:eE.cT.DOCS,size:16}),onClick:()=>{n.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:d}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},tM={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:e_(),inputMenuIsOpen:!1,setInputMenuIsOpen:e_(),menuView:{rootItems:[],currentItems:[]},handleClickItem:e_(),handleBack:e_(),highlightedItemKey:null,setHighlightedItemKey:e_(),animationDirection:"none"},tk={...tM,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:e_(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:e_(),githubModalIsOpen:!1,setGithubModalIsOpen:e_(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:e_(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:e_()},tN=(0,g.createContext)(tk),tC=(0,g.createContext)(tM),t_=e=>{let{actions:t,rootItems:n,menuType:a,inputMenuIsOpen:s,setInputMenuIsOpen:l}=e,i=(0,g.useRef)(null),[r,o]=(0,g.useState)(null),[d,c]=(0,g.useState)(null),[u,m]=(0,g.useState)(""),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s&&e){l(!0);return}if(s&&!e){m("");let e=()=>{var e;p(null,!0),c(null),l(!1),null===(e=document.getElementById("input-".concat(a,"-menu-trigger")))||void 0===e||e.focus()};t.withDelay?setTimeout(e,200):e()}},p=(e,t)=>{t?i.current=e:i.current=r,o(e)},f=(()=>{if(r){let e=n.find(e=>e.key===r);if(e&&"children"in e)return e.children}return n})(),h=ty({actions:t,inputMenuSearchQuery:u,inputMenuIsOpen:s,pathItems:f,path:r,menuType:a}),v=u.trim().length?h:f,{handleClickItem:y,handleBack:j}=tx({currentItems:v,inputMenuIsOpen:s,setInputMenuIsOpen:x,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,path:r,handleUpdatePath:p,highlightedItemKey:d,setHighlightedItemKey:c}),b=i.current&&!r?"back":!i.current&&r?"forward":"none";return{path:r,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,inputMenuIsOpen:s,setInputMenuIsOpen:x,menuView:{rootItems:n,currentItems:v},handleClickItem:y,handleBack:j,highlightedItemKey:d,setHighlightedItemKey:c,animationDirection:b}};function tS(e){let{children:t}=e,[n,a]=(0,g.useState)(!1),[s,l]=(0,g.useState)(!1),[i,r]=(0,g.useState)(null),[o,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),[x,p]=(0,g.useState)(null),[f,h]=(0,g.useState)(null),v=tl({setStyleModalOpenWithScreen:p,setCreateProjectModalIsOpen:r,setGithubModalIsOpen:d,setGmailAuthModalIsOpen:m,setCreatePromptArgumentModalIsOpen:h}),y=e7({actions:v,inputMenuIsOpen:n}),j=t_({actions:v,rootItems:y,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:a}),b=eU({actions:v}),w=t_({actions:v,rootItems:b,menuType:"tools",inputMenuIsOpen:s,setInputMenuIsOpen:l});return(0,c.jsx)(tN.Provider,{value:{...j,styleModalOpenWithScreen:x,setStyleModalOpenWithScreen:p,createProjectModalIsOpen:i,setCreateProjectModalIsOpen:r,githubModalIsOpen:o,setGithubModalIsOpen:d,gmailAuthModalIsOpen:u,setGmailAuthModalIsOpen:m,createPromptArgumentModalIsOpen:f,setCreatePromptArgumentModalIsOpen:h},children:(0,c.jsx)(tC.Provider,{value:w,children:t})})}function tE(){return(0,g.useContext)(tN)}function tZ(){return(0,g.useContext)(tC)}let tI=e=>{let{hideIndicatorText:t,hideIndicators:n}=e,a=(0,v.Z)();return n?null:(0,c.jsx)(ek.S,{children:(0,c.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,c.jsx)(tT,{}),(0,c.jsx)(tA,{itemKey:eM.Mm.COMPASS,tooltip:a.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,c.jsx)(tz,{hideIndicatorText:t}),(0,c.jsx)(tD,{hideIndicatorText:t})]})})},tT=()=>{let e=(0,v.Z)(),{menuView:{rootItems:t}}=tZ(),n=t.find(e=>e.key===eM.Mm.EXTENDED_THINKING),a=(0,x.EH)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,x.gw);return!n||a?null:(0,c.jsx)(tR,{hideIndicatorText:!0,menuItem:n,icon:n.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"})})},tA=e=>{let{itemKey:t,tooltip:n}=e,{menuView:{rootItems:a}}=tE(),{menuView:{rootItems:s}}=tZ(),l=[...a,...s].find(e=>e.key===t);return l?(0,c.jsx)(tR,{hideIndicatorText:!0,menuItem:l,icon:l.icon,tooltip:n}):null},tz=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=tZ(),a=tc(),s=n.find(e=>"styles"===e.key);return s&&"optionGroup"===s.type?(0,c.jsx)(tR,{hideIndicatorText:t,menuItem:s,icon:(0,c.jsx)(ew.z0,{size:18,className:"-m-[1px]"}),text:s.secondaryText,buttonClassName:"!shrink",handleClick:()=>a("Default")}):null},tD=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=tE(),a=to(),s=n.find(e=>e.key===eM.Mm.PROJECTS);return s&&"optionGroup"===s.type?(0,c.jsx)(tR,{hideIndicatorText:t,menuItem:s,icon:(0,c.jsx)(ew.pj,{size:18,className:"-m-[1px]"}),text:s.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>a(void 0)}):null},tR=e=>{let{menuItem:t,handleClick:n,...a}=e,{handleClickItem:s}=tE();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:l}=t,i=!!t.menuItemHidden;return(0,c.jsx)(eN.M,{onClick:null!=n?n:()=>s(t),indicatorActive:l,disabled:i,showRemoveIcon:!0,...a})};var tO=n(45399),tL=n(28386);n(20456),n(28803);let tF={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},tP=e=>{let{anchorRef:t,children:n,side:a,align:s="center",accentColor:l="default",onClose:i,className:r,introDelay:o=0,spacing:d={},buttonText:u,onClickButton:m}=e,x={...tF,...d},f=(0,g.useRef)(null),[v,y]=(0,g.useState)(a),[j,b]=(0,g.useState)(s);(0,g.useEffect)(()=>{if(!f.current||!t.current)return;let e=()=>{let{current:e}=f,{current:n}=t;if(!e||!n)return;let a=n.getBoundingClientRect(),s=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=v,o=j,d=0,c=0,u=()=>{d="top"===r?a.top-s.height-x.FROM_ANCHOR:"bottom"===r?a.bottom+x.FROM_ANCHOR:a.top-x.POINTER_OFFSET+.5*a.height-.5*x.POINTER_HEIGHT},m=()=>{if("left"===r)c=a.left-s.width-x.FROM_ANCHOR;else if("right"===r)c=a.right+x.FROM_ANCHOR;else switch(o){case"start":c=a.left-x.FROM_ANCHOR;break;case"center":c=a.left+(a.width-s.width)/2;break;case"end":c=a.right-s.width+x.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+s.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+s.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==v&&y(r),o!==j&&b(o)};e();let n=new ResizeObserver(e);t.current&&(n.observe(t.current),t.current.parentElement&&n.observe(t.current.parentElement));let a=e=>{if(i){var t;(null===(t=f.current)||void 0===t?void 0:t.contains(e.target))||i()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",a,{capture:!0}),()=>{n.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",a,{capture:!0})}},[v,j,t,i,x.FROM_ANCHOR,x.POINTER_HEIGHT,x.POINTER_OFFSET]);let w={};switch(v){case"right":w={translateX:-x.FROM_ANCHOR,opacity:0};break;case"left":w={translateX:x.FROM_ANCHOR,opacity:0};break;case"bottom":w={translateY:-x.FROM_ANCHOR,opacity:0};break;case"top":w={translateY:x.FROM_ANCHOR,opacity:0}}return(0,c.jsxs)(h.E.div,{ref:f,initial:w,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:o,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,p.Z)("font-styrene text-sm fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===l&&"bg-bg-200 border-border-300","secondary"===l&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",r),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,c.jsx)("div",{className:"absolute left-0 right-0 top-0 bottom-0 z-[-1] rounded-xl bg-gradient-to-b from-always-white/20 to-always-white/0"}),(0,c.jsx)(tU,{side:v,align:j,accentColor:l,spacing:x}),(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[n,!!u&&!!m&&(0,c.jsx)(Q.z,{variant:"outline",className:(0,p.Z)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===l&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{m(),null==i||i()},size:"sm",children:(0,c.jsx)("p",{className:"inline",children:u})})]})]})},tU=e=>{let{accentColor:t,side:n,align:a,spacing:s=tF}=e,l="fill-bg-200",i="fill-border-300";"secondary"===t&&(l="fill-accent-secondary-900",i="fill-accent-secondary-100/50");let r={};switch(n){case"top":r={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":r={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":r={top:s.POINTER_OFFSET};break;case"left":r={top:s.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===n||"bottom"===n)switch(a){case"start":r.left=s.POINTER_OFFSET;break;case"end":r.left="auto",r.right=s.POINTER_OFFSET}return(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:s.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,p.Z)("absolute origin-center pointer-events-none","right"===n&&"right-full"),style:r,children:[(0,c.jsx)("path",{className:l,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,c.jsx)("path",{className:i,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};var tG=n(13473),tH=n(21878),tB=n(1399);let tK=e=>{let{anchorRef:t,canShowNux:n,text:a,id:s,nuxItem:l,side:i}=e,{shouldShow:r,dismiss:o}=function(e,t){let{dateAdded:n,priority:a,showAfterOthersDismiss:s}=t,l=(0,g.useContext)(tB.s),{dismiss:i,isDismissed:r}=(0,tH.K)();if(!l)throw Error("useNux must be used within a NuxProvider");let{registerNux:o,unregisterNux:d,currentlyShowing:c}=l;return(0,g.useEffect)(()=>{if(!r(e))return o(e,{dateAdded:n,priority:a,showAfterOthersDismiss:s}),()=>d(e)},[e,n,a,s,r,o,d]),{shouldShow:c===e&&!r(e),dismiss:()=>{i(e),d(e)}}}(s,l);return r&&n?(0,c.jsx)(tP,{side:i,anchorRef:t,onClose:o,accentColor:"secondary",introDelay:.5,children:(0,c.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,c.jsx)(tG.v,{size:16,className:"text-accent-secondary-200"}),(0,c.jsx)("p",{className:"-my-[2px]",children:a})]})}):null};(s=r||(r={}))[s.HIGH=30]="HIGH",s[s.MEDIUM=20]="MEDIUM",s[s.LOW=10]="LOW",s[s.NONE=0]="NONE",n(16173);var tV=n(11510);let tY=e=>{let{path:t}=e,n={drive:(0,v.Z)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},a=t&&t in n?n[t]:null;return a?(0,c.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,c.jsx)(tV.k,{size:14}),a]}):null};var tW=n(57860),tq=n(47666),tJ=n(19186);let tQ=e=>{let{path:t,inputMenuSearchQuery:n,setInputMenuSearchQuery:a,handleBack:s,className:l}=e,i=(0,v.Z)(),r=(0,ee.r3)(),o={[eM.Mm.DRIVE]:i.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[eM.Mm.PROJECTS]:i.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[eM.Mm.STYLES]:i.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},d=t&&t in o?o[t]:i.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),u=null===t||!!n.trim().length;return(0,c.jsxs)("div",{className:(0,p.Z)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",l),children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(tJ.Y,{size:18,className:(0,p.Z)("-m-[1px] text-text-500/50 transition-opacity",u?"opacity-100":"opacity-0")}),(0,c.jsx)("button",{onClick:s,className:(0,p.Z)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",u?"opacity-0":"opacity-100"),disabled:u,children:(0,c.jsx)(tq.X,{size:16})})]}),(0,c.jsx)("input",{autoFocus:!r,id:tu,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:d,value:n,onChange:e=>a(e.target.value)})]})};var tX=n(89755),t$=n(60105);let t0=e=>{let{tooltip:t,text:n,tag:a,showCaretIcon:s,indicatorActive:l=!1,hideIndicatorText:i,canShowDot:r,onDoubleClick:o,menuType:d,menuView:u,inputMenuIsOpen:m,setInputMenuIsOpen:x}=e,p=(0,v.Z)(),f=(0,g.useRef)(null),{rootItems:y}=u,j={indicatorActive:l,text:n||"",tooltip:t},b=eO(),w="tools"===d&&b;if(w){j.tooltip=p.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=y.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(j.indicatorActive=!0,j.text=e.label)}let M=y.filter(e=>{let{indicatorActive:t}=e;return t}).length,k=(0,c.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===d?(0,c.jsx)(h.E.div,{animate:{rotate:m?45:0},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,c.jsx)(tX.v,{size:16})}):"research"===d?(0,c.jsx)(ew.A9,{size:16}):w?(0,c.jsx)(ew.z0,{size:16}):(0,c.jsx)(t$.j,{size:16}),(0,c.jsx)(t1,{isShown:r&&M>0})]}),N="plus"===d?p.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===d?p.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):w?p.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):p.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,c.jsx)("div",{className:"flex items-center",children:(0,c.jsx)(eN.M,{tag:a,showCaretIcon:s,hideIndicatorText:!!i,icon:k,id:"input-".concat(d,"-menu-trigger"),ref:f,onClick:()=>{x(!m)},onKeyDown:e=>{m||"Space"!==e.code&&"ArrowDown"!==e.code||x(!0)},onDoubleClick:o?e=>{m||(e.preventDefault(),null==o||o())}:void 0,"aria-expanded":m,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(d),"aria-label":p.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:N}),...j})})},t1=e=>{let{isShown:t}=e;return!!t&&(0,c.jsx)(h.E.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,c.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})},t2={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},t5=e=>{let{placement:t,canShowDot:n}=e,a=(0,g.useRef)(null),s=(0,v.Z)(),l=tZ(),i=(0,eT.tF)();return(0,c.jsxs)("div",{ref:a,children:[(0,c.jsx)(t4,{canShowDot:n,placement:t,menuType:"tools",...l,tooltip:s.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,c.jsx)(tK,{canShowNux:i,anchorRef:a,side:"bottom",text:s.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:r.HIGH,showAfterOthersDismiss:!0}})]})},t3=e=>{let{placement:t,canShowDot:n}=e,a=tE();return(0,c.jsx)(t4,{placement:t,menuType:"plus",canShowDot:n,...a})},t7=e=>{let t,{hideIndicatorText:n}=e,a=(0,v.Z)(),{conversation:s,model:l,setModel:i}=(0,_.r)(),r=(0,ed.gE)("compass_mode"),{toggleConversationSetting:o}=(0,ed.M0)(),d=(0,el.iH)(),u=(0,el.zA)(),m=(0,el.hU)(s),x=(0,G.wN)((null==s?void 0:s.id)||null),p=(0,el.wH)()(null!=l?l:x),f=(0,el.wH)()(x),h=!s&&!p&&f;if(!d)return null;u?m?p||h||(t=a.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=a.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=a.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let g=!!t;return(0,c.jsx)(eN.M,{disabled:g,tooltip:t,hideIndicatorText:!!n,icon:(0,c.jsx)(ew.A9,{size:18,className:"-m-[1px]"}),onClick:()=>{g||(h&&i(x),o("compass_mode","advanced"===r?null:"advanced"))},indicatorActive:!g&&"advanced"===r,text:a.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),tag:"beta"})},t4=e=>{let{text:t,tag:n,showCaretIcon:a,indicatorActive:s,canShowDot:l,hideIndicatorText:i,tooltip:r,placement:o,menuType:d,path:u,menuView:m,highlightedItemKey:x,setHighlightedItemKey:v,handleClickItem:j,inputMenuIsOpen:b,setInputMenuIsOpen:w,inputMenuSearchQuery:M,setInputMenuSearchQuery:k,handleBack:N,animationDirection:C}=e,{currentItems:_}=m,S=(0,g.useRef)(null),E=(0,g.useRef)(null),Z=(0,g.useRef)(null),[I,T]=(0,g.useState)(void 0),[A,z]=(0,g.useState)("bottom"===o?"top":"bottom"),[D,R]=(0,g.useState)(0);(0,g.useEffect)(()=>{if(!E.current||!Z.current)return;let e=E.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:n}=t8({placement:o,triggerRectTop:e.top,triggerRectBottom:e.bottom});T(Math.min(448,t)),z(n);let a=Z.current.getBoundingClientRect();R(Math.min(0,window.innerWidth-a.right-8))},[o,b]),(0,y.t$)(S,()=>{w(!1)},"mouseup"),(0,y.t$)(S,()=>{w(!1)},"touchend");let O=eL(),L=("plus"===d||"tools"===d)&&O?(0,c.jsx)(tQ,{path:u,inputMenuSearchQuery:M,setInputMenuSearchQuery:k,handleBack:N}):null;return(0,c.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:S,children:[(0,c.jsx)("div",{ref:E,children:(0,c.jsx)(t0,{tag:n,tooltip:r,text:t,showCaretIcon:a,indicatorActive:s,hideIndicatorText:i,canShowDot:l,menuType:d,menuView:m,inputMenuIsOpen:b,setInputMenuIsOpen:w,onDoubleClick:"plus"===d?()=>tr:void 0})}),(0,c.jsx)("div",{ref:Z,className:(0,p.Z)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===A?"bottom-10":"top-10",b?"block":"hidden"),children:(0,c.jsx)(f.M,{children:b&&(0,c.jsx)(h.E.div,{initial:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,p.Z)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===A?"flex-col-reverse":"flex-col"),onMouseEnter:()=>v(null),style:{maxHeight:I?"".concat(I,"px"):void 0,left:D},onClick:e=>{e.stopPropagation(),tm()},children:(0,c.jsxs)(tO.H,{duration:100,className:(0,p.Z)("flex flex-col min-h-0 w-full !ease-out","top"===A?"justify-end":"justify-start"),children:[(0,c.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===A&&L,(0,c.jsx)(h.E.div,{variants:t2[C],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:tL.J.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:_.filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>(0,c.jsx)(tW.P,{item:e,onClick:()=>j(e),isHighlighted:x===e.key},e.key))},null!=u?u:"root"),"top"===A&&L]}),(0,c.jsx)(tY,{path:u})]})})})})]})},t8=e=>{let{placement:t,triggerRectTop:n,triggerRectBottom:a}=e,s=window.innerHeight-a-8-8;if("bottom"===t){let e=n-76-8;return e<160&&s>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:s}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=n-8-8;return s<160&&e>s?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:s}}},t6=e=>{let{placement:t,isDisabled:n}=e,a=(0,g.useRef)(null),s=(0,v.Z)(),{projectUuid:l,prompt:i,model:r,setModel:o,attachments:d,files:u,syncSourceUuids:m,sendMessage:x,stopSampling:p,conversation:f,isSending:h,isChatSyncing:j,isProjectSyncing:b,isModelSelectorOpen:w,setIsModelSelectorOpen:M,isNewConversation:k,currentCompassTask:N}=(0,_.r)(),C=j||b?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,S=(0,g.useMemo)(()=>{var e;return[...u,...null!==(e=null==f?void 0:f.files)&&void 0!==e?e:[]].some(e=>e.file_kind===K.Y.Image||e.file_kind===K.Y.SanitizedDocument)},[u,f]),E=(0,g.useCallback)(e=>o(e.model),[o]),{width:Z=null}=(0,y.yU)({ref:a,box:"border-box"}),I=null===Z||Z<480,T=null===Z||Z<396,A=null!==Z&&Z<440&&!T,z=(0,V.jL)();return(0,c.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:a,children:[z?(0,c.jsx)("div",{className:"w-full"}):(0,c.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,c.jsx)(t3,{placement:t,canShowDot:null!==Z&&T}),(0,c.jsx)(t5,{placement:t,canShowDot:null!==Z&&T}),(0,c.jsx)(t7,{hideIndicatorText:I}),"",null!==Z&&(0,c.jsx)(tI,{hideIndicatorText:I,hideIndicators:T}),(0,c.jsx)(q,{model:r,projectUuid:l})]}),!z&&(0,c.jsx)(ej,{selectedModel:r,onSelect:E,hasMultiModalContent:S,placement:t,open:w,onOpenChange:M,isNewConversation:k,hideModelNameLogo:A}),(0,c.jsx)(eb.h,{isSending:h,isDisabled:n,disabledReason:C,prompt:i,files:u,attachments:d,syncSourceUuids:m,conversation:f,currentCompassTask:N,onSend:()=>x(),onStop:()=>p()})]})};var t9=n(35354),ne=n(75502);let nt=()=>{let{onDrop:e}=(0,_.r)();return(0,c.jsx)(t9.rE,{onDrop:e,children:(0,c.jsx)(nn,{})})},nn=()=>{let{dragState:e}=(0,t9.EO)(),t=e===t9.h7.DRAGGING_ON_TARGET;return e===t9.h7.DRAGGING_OFF_TARGET||e===t9.h7.DRAGGING_ON_TARGET?(0,c.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,c.jsx)("div",{className:(0,p.Z)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,c.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,c.jsx)(ne.E,{size:20,className:"opacity-50"}),(0,c.jsx)(A.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})}):null};var na=n(5984),ns=n(52939),nl=n(30976),ni=n.n(nl),nr=n(34236);function no(e){var t,n;let{isOpen:a,onClose:s,client:l,prompt:i}=e,r=(0,v.Z)(),o=(0,g.useCallback)(()=>{m({}),s()},[s]),d=(0,e3.Vr)(o),[u,m]=(0,g.useState)({}),x=null==i?void 0:null===(t=i.arguments)||void 0===t?void 0:t.some(e=>e.required&&!u[e.name]);return i&&l?(0,c.jsxs)(ns.u_,{title:r.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,c.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[i.name,(0,c.jsx)(nr.D,{text:i.description})]}),isOpen:a,onClose:o,modalSize:"lg",children:[(0,c.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null===(n=i.arguments)||void 0===n?void 0:n.map(e=>(0,c.jsx)("div",{className:"flex flex-col gap-1",children:(0,c.jsx)(na.oi,{required:e.required,label:"".concat(ni()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>m(n=>({...n,[e.name]:null!=t?t:""})),onBlur:()=>{m(t=>{var n;return{...t,[e.name]:(null!==(n=t[e.name])&&void 0!==n?n:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,c.jsxs)(ns.dm,{children:[(0,c.jsx)(Q.z,{disabled:x,onClick:()=>void d(l,i,u),children:(0,c.jsx)(A.Z,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,c.jsx)(Q.z,{variant:"secondary",onClick:o,children:(0,c.jsx)(A.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var nd=n(80151),nc=n(95899),nu=n(92676),nm=n(6688),nx=n(63731);let np=e=>{let{moveAttachments:t=!1,handleProjectCreated:n,isOpen:a,handleClose:s,syncSources:l=[],attachments:i=[],setSyncSourceUuids:r,setAttachments:o}=e,[d,u]=(0,g.useState)(null),{addError:m}=(0,I.e)(),x=(0,nm.G)();return nf({project:d,syncSources:l,attachments:i,setSyncSourceUuids:r,setAttachments:o}),(0,c.jsxs)(ns.u_,{isOpen:a,onClose:s,modalSize:"xl",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start",children:[(0,c.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:t?(0,c.jsx)(A.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,c.jsx)(A.Z,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,c.jsx)(Q.z,{onClick:s,size:"icon",variant:"ghost",children:(0,c.jsx)(nd.X,{size:16})})]}),a&&(0,c.jsx)(nx.hK,{syncSources:t?l:void 0,onProjectCreated:e=>{t&&u(e),n(e)},onError:m,onCancel:s,strings:x})]})},nf=e=>{let{project:t,syncSources:n,attachments:a,setSyncSourceUuids:s,setAttachments:l}=e,i=(0,g.useRef)(!1),{addSuccess:r}=(0,I.e)(),o=(0,v.Z)(),{mutate:d}=(0,nc.u3)(null==t?void 0:t.uuid),{mutate:c}=(0,nu.gr)(null==t?void 0:t.uuid),u=(0,g.useCallback)(()=>{t&&(a.length||n.length&&t.is_private)&&(a.forEach(e=>{let{file_name:t,extracted_content:n}=e;d({file_name:t,content:n})}),t.is_private&&(n.forEach(e=>{let t=(0,eA.hJ)(e);t&&c(t)}),s([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,a,d,l,c,s,n,o]);(0,g.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var nh=n(80022),ng=n(42814),nv=n(5161),ny=n(73107),nj=n(42755),nb=n(34505),nw=n(32598),nM=n(30729),nk=n(64070),nN=n(30947);let nC=()=>{let{addError:e}=(0,I.e)();return{handleRateLimitError:(t,n)=>{t instanceof nN.Hx&&429===t.statusCode?e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}},n_=(0,nk.default)(()=>n.e(8446).then(n.bind(n,38446)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[38446]},ssr:!1}),nS={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},nE=(0,g.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:a,animateBoolRef:s}=e,l=(0,v.Z)(),r=(0,tn.z$)(),[o,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(""),{handleRateLimitError:x}=nC(),{mutateAsync:p}=(0,ng.GB)(),y=(0,g.useRef)(null),j=(0,g.useRef)(null);(0,g.useEffect)(()=>{o&&setTimeout(()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.focus()},50)},[o]);let[b,w]=(0,g.useState)(!1),[M,k]=(0,g.useState)(!1),N=(0,g.useRef)(null),C=(0,g.useRef)(null),_=4e3,{handleFileUpload:S,handleTextUpload:E}=function(e){let[t,n]=(0,g.useState)(!1),{activeOrganization:a}=(0,P.t)(),{addError:s}=(0,I.e)(),l=(0,F.OJ)();return{handleFileUpload:async i=>{if(t||!a)return;if(n(!0),!(0,nv.dF)(i))try{let t=await (0,nv.CL)(i);await e(t),n(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(a.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){s(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async s=>{!t&&a&&0!==s.trim().length&&(n(!0),await e(s),n(!1))},isUploading:t}}(async e=>{try{let t=await p({content_example:e});N.current=t}catch(e){x(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),w(!1)}}),Z=()=>{N.current?a(N.current,!0):(_=1e3,C.current=setTimeout(Z,_))},T=async()=>{R(),await E(u)},z=async e=>{let t=Array.from(e.dataTransfer.files);t&&(k(!0),setTimeout(R,20),await S(t[0]))},D=async e=>{let t=e.target.files;t&&(R(),await S(Array.from(t)[0])),e.target.value=""},R=()=>{w(!0),C.current=setTimeout(Z,_)};return(0,c.jsx)(h.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:s.current?nS:{duration:0},children:(0,c.jsxs)(f.M,{mode:"popLayout",children:[b&&(0,c.jsx)(h.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:nS,children:(0,c.jsx)(nI,{})},"CreateStyleAnalyzingContentScreen"),!b&&(0,c.jsxs)(h.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,c.jsxs)(h.E.div,{exit:{opacity:0,y:40,transition:nS},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,c.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,c.jsx)(n_,{})}),(0,c.jsx)("p",{className:"text-text-300 font-tiempos sm:text-lg",children:(0,c.jsx)(A.Z,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,c.jsx)(h.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:nS}},children:o?(0,c.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,c.jsx)("textarea",{ref:j,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:u,onChange:e=>m(e.target.value),required:!0}),(0,c.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,c.jsx)(Q.z,{variant:"secondary",onClick:()=>d(!1),children:(0,c.jsx)(A.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,c.jsx)(Q.z,{onClick:T,children:(0,c.jsx)(A.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,c.jsxs)(t9.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:z,children:[(0,c.jsx)(nZ,{showDropCover:M},"DropZoneOverlay"),(0,c.jsx)("input",{ref:y,type:"file",className:"hidden",accept:(0,nv.tB)({imagesEnabled:!1}).join(","),onChange:D,multiple:!0}),(0,c.jsxs)("div",{children:[(0,c.jsxs)(X.Lt,{trigger:(0,c.jsx)(Q.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,c.jsx)(ny.$,{weight:"bold"}),children:(0,c.jsx)(A.Z,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,c.jsx)(X.hP,{children:(0,c.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{y.current&&y.current.click()},children:[(0,c.jsx)(nj.p,{size:16}),(0,c.jsx)(A.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,c.jsx)(X.hP,{onClick:()=>d(!0),children:(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(nb.P,{size:16}),(0,c.jsx)(A.Z,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,c.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,c.jsx)("p",{children:window.innerWidth<=640?(0,c.jsx)(A.Z,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,c.jsx)(A.Z,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,c.jsx)("p",{children:(0,c.jsx)(A.Z,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,c.jsx)("div",{className:"absolute w-full bottom-6",children:(0,c.jsx)(Q.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,c.jsx)(nw.x,{}),onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),n(i.CREATE_MANUALLY)},children:(0,c.jsx)(A.Z,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});nE.displayName="CreateStyle";let nZ=e=>{let{showDropCover:t}=e,{dragState:n}=(0,t9.EO)(),a=n===t9.h7.DRAGGING_OFF_TARGET||n===t9.h7.DRAGGING_ON_TARGET||t;return(0,c.jsx)(f.M,{children:a&&(0,c.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,p.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===t9.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,c.jsxs)("div",{className:"py-1.5 text-center",children:[(0,c.jsx)("div",{className:"relative inline-block opacity-60",children:(0,c.jsx)(nM.y,{size:36,weight:"thin"})}),(0,c.jsx)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:(0,c.jsx)(A.Z,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},nI=()=>(0,c.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,c.jsx)(n_,{animate:!0}),(0,c.jsx)(h.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,c.jsx)(A.Z,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var nT=n(30028),nA=n(17764),nz=n(99851),nD=n(24038);let nR={objective:{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nT.V,{})," ",(0,c.jsx)(A.Z,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nD.E,{})," ",(0,c.jsx)(A.Z,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nA.i,{})," ",(0,c.jsx)(A.Z,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nw.x,{})," ",(0,c.jsx)(A.Z,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,c.jsx)(A.Z,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},nO=(0,g.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:a}=e,s=(0,v.Z)(),l=(0,tn.z$)(),[r,o]=(0,g.useState)(!1),[d,u]=(0,g.useState)(""),[m,x]=(0,g.useState)(Object.keys(nR)[0]),{handleRateLimitError:y}=nC(),{mutateAsync:j}=(0,ng.GB)(),b=(0,g.useRef)(null);(0,g.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.focus()},50)},[m]);let w=d.replace(/\s/g,"").length>24,M=async()=>{if(!r&&w){o(!0);try{let e="custom"===m?{prompt:d}:{input_text:nR[m].promptPrepend+"\n"+d},t=await j(e);a(t,!1)}catch(e){y(e,s.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},k=e=>{l.track({event_key:"styles.custom.describe_selected",key:e}),x(e)};return(0,c.jsxs)(h.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,c.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,c.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,c.jsx)(A.Z,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,c.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(nR).map(e=>(0,c.jsx)("li",{children:(0,c.jsxs)("button",{className:(0,p.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",m===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>k(e),children:[(0,c.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:m===e&&(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),nR[e].label]})},e))}),(0,c.jsx)("div",{className:"sm:hidden",children:(0,c.jsx)(X.Lt,{trigger:(0,c.jsx)(Q.z,{variant:"ghost",append:(0,c.jsx)(en.p,{}),className:"w-full !border !border-border-300",children:(0,c.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:nR[m].label})}),children:Object.keys(nR).map(e=>(0,c.jsx)(X.hP,{onSelect:()=>k(e),children:(0,c.jsx)("div",{className:"flex items-center gap-1",children:nR[e].label})},e))})})]}),(0,c.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,c.jsx)(Q.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(i.CREATE),prepend:(0,c.jsx)(nz.D,{}),children:(0,c.jsx)(A.Z,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,c.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),M()},children:[(0,c.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:nR[m].description}),(0,c.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,c.jsx)("textarea",{ref:b,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:nR[m].placeholder,value:d,required:!0,onChange:e=>u(e.target.value)}),(0,c.jsx)(f.M,{children:d.length>0&&!w&&(0,c.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,c.jsx)(A.Z,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,c.jsx)($.u,{tooltipContent:w?"":s.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,c.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,c.jsx)(Q.z,{className:"w-full",type:"submit",loading:r,disabled:!w,children:"custom"===m?(0,c.jsx)(A.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,c.jsx)(A.Z,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});nO.displayName="CreateStyleManually";var nL=n(2210),nF=n(72538),nP=n(49167),nU=n(42253),nG=n(7778),nH=n(87896),nB=n(34141),nK=n(26608),nV=n(52681),nY=n(38459),nW=n(41270),nq=n(18013);function nJ(){let[e,t]=(0,nq.R)("userHiddenStyles",[]),n=(0,g.useCallback)(e=>{let n=ts(e);t(e=>[...e,n])},[t]),a=(0,g.useCallback)(()=>{t([])},[t]),s=(0,g.useCallback)(t=>t.filter(t=>{let n=ts(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:n,resetHiddenPresetStyles:a,filterHiddenStyles:s}}(l=o||(o={})).VIEW="view",l.EDIT="edit",l.EDIT_MANUALLY="edit_manually";let nQ=nW.z.array(nW.z.object({key:nW.z.string(),name:nW.z.string(),nameKey:nW.z.string().optional(),text:nW.z.string(),textKey:nW.z.string().optional()})),nX=[],n$=()=>(0,x.Zr)("claude_style_previews","previewExamples",nX,nQ),n0=e=>{let{isSaveButton:t,children:n}=e;return(0,c.jsx)("div",{className:(0,p.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},n1=(0,g.forwardRef)((e,t)=>{let{animateBoolRef:n,style:a,setCurrentStyle:s,returnToListScreen:l,setChatStyle:i,setIsEditing:r,setIsEditingName:o}=e,d=(0,v.Z)(),u=ts(a),m="default"===a.type,[x,p]=(0,g.useState)("view"),{mutateAsync:f}=(0,ng.fq)(u,m),{handleRateLimitError:y}=nC(),j=async e=>{let{prompt:t,editInput:n}=e;try{let e=await f({prompt:t,edit_instructions:n});e&&s(e)}catch(e){throw y(e,d.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{r("edit"===e||"edit_manually"===e),p(e)};return(0,c.jsxs)(h.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===x&&(0,c.jsxs)(n0,{children:[(0,c.jsx)(Q.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>i(a),children:(0,c.jsx)(A.Z,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,c.jsx)(n4,{style:a,returnToListScreen:l,onRename:()=>o(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,c.jsxs)(h.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===x&&(0,c.jsx)(n3,{style:a,onClick:()=>b("edit")}),"edit"===x&&(0,c.jsx)(n2,{style:a,updateStyle:j,onClose:()=>b("view")}),"edit_manually"===x&&(0,c.jsx)(n5,{style:a,updateStyle:j,onClose:()=>b("view")})]}),(0,c.jsx)(n7,{style:a,animateBoolRef:n})]})});n1.displayName="EditStyle";let n2=e=>{let{style:t,updateStyle:n,onClose:a}=e,s=(0,v.Z)(),l=(0,g.useRef)(t.prompt),i=(0,g.useRef)(null),[r,o]=(0,g.useState)(!1),[d,u]=(0,g.useState)(!1),[m,x]=(0,g.useState)([]),[y,j]=(0,g.useState)(""),b=async e=>{if(e.preventDefault(),r||d)return!1;await w(y)},w=async e=>{j(""),o(!0),x([...m,e]);try{await n({editInput:e})}catch(e){j(y),x(e=>e.slice(0,-1))}o(!1)},M=async()=>{m.length&&(u(!0),await n({prompt:l.current}),u(!1)),a()},k=(0,g.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return[s.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),s.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[n].name.toLowerCase()})]},[t.attributes,s]);return(0,g.useEffect)(()=>{if(m.length>0){var e;null===(e=i.current)||void 0===e||e.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})}},[m,t.summary]),(0,c.jsxs)("div",{className:"h-full flex flex-col",children:[(0,c.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,c.jsxs)("div",{className:(0,p.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",r?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,c.jsx)("div",{className:(0,p.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",r?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,c.jsx)(f.M,{children:r&&(0,c.jsx)(h.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,c.jsx)(nF.p,{state:"thinking"})})})]}),(0,c.jsx)("ul",{ref:i,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:m.map(e=>(0,c.jsx)("li",{children:(0,c.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),m.length>0?(0,c.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,c.jsx)(A.Z,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,c.jsxs)("div",{className:"mb-2",children:[(0,c.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,c.jsx)(A.Z,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,c.jsx)("ul",{className:"flex flex-col gap-2",children:k.map((e,t)=>(0,c.jsx)("li",{children:(0,c.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,c.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,c.jsx)(na.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:s.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:y,onChange:e=>j(e.target.value),append:(0,c.jsx)(f.M,{children:y.length>0&&(0,c.jsx)(h.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,c.jsx)(Q.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:r||d,children:(0,c.jsx)(nU.a,{})})})})})})]}),(0,c.jsxs)(n0,{isSaveButton:!0,children:[(0,c.jsx)(Q.z,{onClick:a,disabled:r||d||y.length>0||0===m.length,children:(0,c.jsx)(A.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,c.jsx)(Q.z,{onClick:M,disabled:r,loading:d,variant:"secondary",children:m.length>0?(0,c.jsx)(A.Z,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,c.jsx)(A.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},n5=e=>{let{style:t,updateStyle:n,onClose:a}=e,[s,l]=(0,g.useState)(!1),[i,r]=(0,g.useState)(t.prompt),o=(0,v.Z)(),d=async e=>{e.preventDefault(),l(!0),await n({prompt:i}),l(!1),a()};return(0,c.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>d(e),children:[(0,c.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,c.jsx)(A.Z,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,c.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:o.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:i,disabled:s,onChange:e=>r(e.target.value),autoFocus:!0}),(0,c.jsxs)(n0,{isSaveButton:!0,children:[(0,c.jsx)(Q.z,{type:"submit",loading:s,children:(0,c.jsx)(A.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,c.jsx)(Q.z,{onClick:()=>{r(t.prompt),a()},disabled:s,variant:"secondary",children:(0,c.jsx)(A.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},n3=e=>{let{style:t,onClick:n}=e,a="default"===t.type;return(0,c.jsxs)("div",{className:(0,p.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!a&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",a&&"bg-bg-300 border border-border-300"),children:[(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)("div",{className:(0,p.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",a?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:a?(0,c.jsx)(A.Z,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,c.jsx)(A.Z,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,c.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!a&&(0,c.jsx)($.u,{className:"text-center",tooltipContent:(0,c.jsx)(A.Z,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,c.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,c.jsx)("span",{className:"text-sm font-medium",children:(0,c.jsx)(A.Z,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,c.jsx)(tV.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,c.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,c.jsx)(m.d7,{id:t.summaryKey}):t.summary})]}),(0,c.jsx)("div",{className:"flex-1 flex items-center text-sm",children:a?(0,c.jsx)(A.Z,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,c.jsx)(Q.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,c.jsx)(nV.A,{weight:"bold"}),children:(0,c.jsx)(A.Z,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},n7=e=>{let{style:t,animateBoolRef:n}=e,a=(0,v.Z)(),[s,l]=(0,g.useState)(""),[i,r]=(0,g.useState)(),o=(0,g.useRef)(t.prompt),d=(0,g.useRef)(i),u=n$(),{handleRateLimitError:y}=nC(),{isPending:j,mutateAsync:b}=(0,ng.HK)(),w=(0,g.useCallback)(async()=>{if(i)try{let e=await b({style_prompt:t.prompt,example_key:i.key,example_text:i.textKey?(0,m.Gc)({id:i.textKey,intl:a}):i.text});l(e)}catch(e){y(e,a.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[y,b,i,t.prompt,a]);(0,g.useEffect)(()=>{var e;(o.current!==t.prompt||(null===(e=d.current)||void 0===e?void 0:e.key)!==(null==i?void 0:i.key))&&(o.current=t.prompt,d.current=i,w())},[w,i,t.prompt]);let{value:M}=(0,x.FL)("use_in_house_latex_transformer");return(0,c.jsx)(h.E.div,{className:(0,p.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",i?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,c.jsx)(A.Z,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,c.jsx)(X.Lt,{align:"center",trigger:(0,c.jsx)(Q.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,c.jsx)(nY.p,{className:"translate-y-px"}),children:i?i.nameKey?(0,c.jsx)(m.d7,{id:i.nameKey}):i.name:(0,c.jsx)(A.Z,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:u.map(e=>(0,c.jsx)(X.hP,{disabled:j,onClick:()=>r(e),children:e.nameKey?(0,c.jsx)(m.d7,{id:e.nameKey}):e.name},e.key))})]}),(0,c.jsxs)(nP.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,c.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:i.textKey?(0,c.jsx)(m.d7,{id:i.textKey}):i.text}),(0,c.jsx)(f.M,{children:j?(0,c.jsx)("div",{className:"pt-2",children:(0,c.jsx)(nF.p,{state:"writing"})}):(0,c.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,c.jsx)(nL.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:s,useInHouseLatexPlugin:M})})})]})]}):(0,c.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,c.jsx)(A.Z,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,c.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:u.map(e=>(0,c.jsx)("button",{onClick:()=>r(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,c.jsx)(m.d7,{id:e.nameKey}):e.name},e.key))})]})})})},n4=e=>{let{style:t,returnToListScreen:n,onRename:a,setStateToManualEdit:s}=e,l=ts(t),i="default"===t.type,{isPending:r,mutateAsync:o}=(0,ng.KM)(l),{addHiddenPresetStyle:d}=nJ(),{clearStoredStyle:u,storedStyle:m}=(0,eD.O)(),{addError:x}=(0,I.e)(),p=(0,v.Z)(),f=async()=>{if(i)d(t),setTimeout(()=>{n()},500);else try{await o(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),n()}catch(e){x(p.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,c.jsxs)(X.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,c.jsxs)(Q.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,c.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,c.jsx)(A.Z,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,c.jsx)(nY.p,{})]}),(0,c.jsx)("span",{className:"sm:hidden",children:(0,c.jsx)(nG.F,{weight:"bold",size:20})})]}),children:[!i&&(0,c.jsx)(X.hP,{disabled:r,onClick:()=>{a()},children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(nH.z,{className:"mr-2"}),(0,c.jsx)(A.Z,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===l?(0,c.jsx)(X.AZ,{className:"text-sm",children:(0,c.jsx)(A.Z,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,c.jsx)(X.hP,{className:"pr-0 !text-danger-000",disabled:r,onClick:f,children:i?(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(nB.M,{}),(0,c.jsx)(A.Z,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(nK.r,{}),(0,c.jsx)(A.Z,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.u2,{}),(0,c.jsx)(X.hP,{onClick:s,children:(0,c.jsx)(A.Z,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},n8=e=>{let{size:t=16,className:n}=e;return(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,c.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,c.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var n6=n(32411),n9=n(92655),ae=n(13344),at=n(16804);let an=(0,g.forwardRef)((e,t)=>{let{setScreen:n,styles:a,onStyleChange:s}=e,{hiddenPresetStyles:l,resetHiddenPresetStyles:r}=nJ(),{sortStyles:o,setOrder:d}=function(){let[e,t]=(0,nq.R)("userStylesOrder",[]);return{sortStyles:(0,g.useCallback)(t=>[...t].sort((t,n)=>{let a=ts(t),s=ts(n);if("Default"===a)return -1;if("Default"===s)return 1;let l=e.indexOf(a),i=e.indexOf(s);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,g.useCallback)(e=>{t(e.map(e=>ts(e)))},[t])}}(),[u,m]=(0,g.useState)([]),x=(0,g.useCallback)(e=>{let t=[...l,"Default"];return o(e.filter(e=>!t.includes(ts(e))))},[l,o]);(0,g.useEffect)(()=>{m(x(a))},[a,x]);let p=(0,g.useCallback)(e=>{Array.isArray(e)&&(m(e),d(e))},[d]),f=(0,g.useMemo)(()=>a.some(e=>"custom"===e.type),[a]);return(0,c.jsxs)(h.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,c.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,c.jsx)(ae.t.Group,{as:"ul",axis:"y",values:u,onReorder:p,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:u.map(e=>(0,c.jsx)(aa,{style:e,onClick:()=>s(e,!1)},ts(e)))}),!f&&(0,c.jsxs)(h.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,c.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,c.jsx)(A.Z,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,c.jsx)("p",{children:(0,c.jsx)(A.Z,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,c.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,c.jsx)(Q.z,{onClick:()=>n(i.CREATE),prepend:(0,c.jsx)(n8,{}),children:(0,c.jsx)(A.Z,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),l.length>0&&(0,c.jsx)(Q.z,{variant:"underline",onClick:r,children:(0,c.jsx)(A.Z,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});an.displayName="ListStyles";let aa=e=>{let{style:t,onClick:n}=e,a="default"===t.type,s=(0,at.o)(),[l,i]=(0,g.useState)(!1);return(0,c.jsxs)(ae.t.Item,{value:t,dragListener:!1,dragControls:s,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>i(!0),onDragEnd:()=>i(!1),className:"relative my-2 min-w-0",children:[(0,c.jsxs)("button",{className:(0,p.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",l?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,c.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,c.jsx)(m.d7,{id:t.nameKey}):t.name}),a&&(0,c.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,c.jsx)(A.Z,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,c.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:a?(0,c.jsx)(n6.o,{}):(0,c.jsx)(nH.z,{})})]}),(0,c.jsx)("div",{onPointerDown:e=>s.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,c.jsx)(n9.f,{size:16,weight:"bold"})})]})},as=e=>{let{openWithScreen:t,onClose:n,styles:a,setChatStyle:s}=e,l=(0,v.Z)(),r=!!t,o=(0,tn.z$)(),[d,u]=(0,g.useState)(t||i.LIST),[x,p]=(0,g.useState)(),[h,y]=(0,g.useState)(!1),[j,b]=(0,g.useState)(!1),w=(0,g.useRef)(!1);(0,g.useEffect)(()=>{t&&u(t)},[t]);let M=()=>{w.current=!1,u(i.LIST),y(!1),b(!1)},k=()=>{(!h||window.confirm(l.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(o.track({event_key:"styles.modal",open:!1}),M(),n())},N=(e,t)=>{w.current=t,p(e),u(i.EDIT),y(!1),b(!1)};return(0,c.jsx)(ns.u_,{modalSize:"xl",title:(e=>{switch(e){case i.CREATE:return(0,c.jsx)("div",{className:"font-copernicus font-normal",children:(0,c.jsx)(A.Z,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case i.CREATE_MANUALLY:return(0,c.jsx)("div",{className:"font-copernicus font-normal",children:(0,c.jsx)(A.Z,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case i.LIST:return(0,c.jsx)("div",{className:"font-copernicus font-normal",children:(0,c.jsx)(A.Z,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case i.EDIT:return(0,c.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:j?(0,c.jsx)(al,{style:x,onClose:e=>{e&&p(e),b(!1)}}):(0,c.jsx)("button",{title:x.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!h&&b(!0),children:h?(0,c.jsx)(A.Z,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:x.name}}):"default"===x.type&&x.nameKey?(0,c.jsx)(m.d7,{id:x.nameKey}):x.name})})}})(d),icon:(e=>{switch(e){case i.CREATE:case i.EDIT:return(0,c.jsx)(Q.z,{variant:"ghost",size:"icon_sm",disabled:h,onClick:()=>M(),children:(0,c.jsx)(tq.X,{})});case i.CREATE_MANUALLY:return(0,c.jsx)(Q.z,{variant:"ghost",size:"icon_sm",onClick:()=>u(i.CREATE),children:(0,c.jsx)(tq.X,{})});case i.LIST:return null}})(d),isOpen:r,onClose:k,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,c.jsx)(c.Fragment,{children:d===i.LIST&&(0,c.jsx)($.u,{tooltipContent:l.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,c.jsx)("div",{className:"mr-1",children:(0,c.jsx)(Q.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,c.jsx)(nh.H,{size:18})})})})}),hasCloseButton:!0,children:(0,c.jsxs)(f.M,{mode:"popLayout",children:[d===i.CREATE&&(0,c.jsx)(nE,{onStyleChange:N,setScreen:u,animateBoolRef:w},"CreateStyleScreen"),d===i.CREATE_MANUALLY&&(0,c.jsx)(nO,{onStyleChange:N,setScreen:u},"CreateStyleManuallyScreen"),d===i.LIST&&(0,c.jsx)(an,{setScreen:u,styles:a,onStyleChange:N},"ListStylesScreen"),d===i.EDIT&&x&&(0,c.jsx)(n1,{animateBoolRef:w,style:x,returnToListScreen:M,setIsEditingName:b,setCurrentStyle:p,setIsEditing:y,setChatStyle:e=>{s(e),k()}},"EditStyleScreen")]})})},al=e=>{let{style:t,onClose:n}=e,a=ts(t),s="default"===t.type,l=(0,v.Z)(),[i,r]=(0,g.useState)("default"===t.type&&t.nameKey?(0,m.Gc)({id:t.nameKey,intl:l}):t.name),{isPending:o,mutateAsync:d}=(0,ng.fq)(a,s),u=async()=>{n(await d({name:i}))};return(0,c.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await u()},children:(0,c.jsx)(na.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:i,maxLength:64,onChange:e=>r(e.target.value),error:0===i.length,append:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:o,children:(0,c.jsx)(nd.X,{})}),(0,c.jsx)(Q.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:o,children:(0,c.jsx)(et.J,{weight:"bold"})})]})})})};var ai=n(31275),ar=n(14593);let ao=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:n,setIsUploadingGithubSync:a,syncSourceUuids:s,attachments:l,setAttachments:i}=(0,_.r)(),{styleModalOpenWithScreen:r,setStyleModalOpenWithScreen:o,createProjectModalIsOpen:d,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:x,gmailAuthModalIsOpen:p,setGmailAuthModalIsOpen:f,createPromptArgumentModalIsOpen:h,setCreatePromptArgumentModalIsOpen:v}=tE(),{personalizedStyleOptions:y}=(0,eD.O)(),b=tc(),w=(0,g.useCallback)(e=>{n(t=>[...t,e.uuid]),a(!1)},[n,a]),M=(0,j.aP)(s),k=(0,F.F9)(M);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(as,{openWithScreen:r,onClose:()=>o(null),styles:y,setChatStyle:e=>b(e.key)}),(0,c.jsx)(ar.m,{isOpen:!!p,onClose:()=>f(!1),callerIdentifier:"inputMenu"}),(0,c.jsx)(np,{moveAttachments:!!(null==d?void 0:d.moveAttachments),isOpen:!!(null==d?void 0:d.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:k,attachments:l,setSyncSourceUuids:n,setAttachments:i}),(0,c.jsx)(ai.U,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>x(!1),onCreated:w,setIsUploadingGithubSync:a}),h&&(0,c.jsx)(no,{isOpen:h.isOpen,onClose:()=>v(null),client:h.client,prompt:h.prompt})]})};function ad(){let e=(0,d._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return ad=function(){return e},e}function ac(){let e=(0,d._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return ac=function(){return e},e}function au(){let e=(0,d._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return au=function(){return e},e}let am=(0,g.forwardRef)((e,t)=>{var n,a,s,l;let{disabled:i,placement:r,placeholder:o,onSubmit:d}=e,u=(0,v.Z)(),{prompt:M,tipTapEditorState:k,projectUuid:N,setPrompt:T,setTipTapEditorState:z,setAttachments:R,setFiles:G,attachments:K,files:V,syncSourceUuids:Y,isUploadingDriveSync:W,isUploadingGithubSync:q,sendMessage:J,conversation:Q,isChatSyncing:X,isProjectSyncing:$,setSyncSourceUuids:ee,isSending:et,focusInput:en,isFocused:ea,setIsFocused:es,promptInputRef:el,willRedirectOnSubmit:ei,hasBlockingWarning:er,isUploadingFile:eo,setIsUploadingFile:ed,validateMaxUploadLimit:ec,onPasteFiles:eu,uploadInputProps:em,hasAttachments:ex,isNewConversation:ep}=(0,_.r)();(0,g.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{T(e,{forceUpdateTiptap:!0}),R("function"==typeof t?t(K):t),G("function"==typeof n?n(V):n)},sendMessage:J,setAttachments:e=>{R("function"==typeof e?e(K):e)},getAttachments:()=>K})),H();let{fetchInputAutocompletion:ef}=(0,b.Vl)(null==Q?void 0:Q.id),eh=function(e,t,n,a,s,l){let i=function(e,t,n,a){let{addError:s}=(0,I.e)(),l=(0,g.useCallback)(e=>{n(!1),e&&s(e)},[s,n]),{activeOrganization:i}=(0,P.t)(),r=null==i?void 0:i.uuid,o=(0,F.OJ)(),d=(0,g.useCallback)(async e=>{let t;if(!r)return l((0,c.jsx)(A.Z,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(r,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await o("/api/organizations/".concat(r,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,U.Tb)(e),l((0,c.jsx)(A.Z,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return l("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?l():l((0,c.jsx)(A.Z,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:l((0,c.jsx)(A.Z,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[o,r,l]),{value:u}=(0,x.FL)("hatch_use_web_fetcher");return(0,g.useCallback)(async s=>{if(!u)return;let l=[],i=(0,L.Yl)(s);if(0!==i.length&&a({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let a=i[t];if(e.some(e=>a.endsWith(e.file_name)))continue;n(!0);let s=await d(a);if(!s)return;l.push(s)}l.forEach(e=>(0,Z.Ch)(e)),l.length>0&&t(e=>[...e,...l]),n(!1)}},[u,a,d,n,t,e])}(e,t,n,a),[r,o]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{let e=e=>{"Shift"===e.key&&o(!0)},t=e=>{"Shift"===e.key&&o(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,g.useCallback)(e=>{var n,o,d;let c=null===(o=e.clipboardData)||void 0===o?void 0:null===(n=o.files)||void 0===n?void 0:n.length,u=null===(d=e.clipboardData)||void 0===d?void 0:d.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!c){let e=(0,D.g)(u);e&&l(e)}if(c&&!m){a({newUploads:Array.from(e.clipboardData.files)})&&s(e.clipboardData.files),e.preventDefault();return}if(a({numNewPotentialAttachments:1,showError:!1})){if(i(u).catch(console.error),!m||u.length<4e3||r)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})}},[a,t,i,s,l,r])}(K,R,ed,ec,eu,O()),eg=null!==(n=null==Q?void 0:Q.projectKnowledgebaseTokens)&&void 0!==n?n:0,[ev]=(0,B.X)({projectUuid:N,conversationUUID:null!==(a=null==Q?void 0:Q.id)&&void 0!==a?a:null,conversationTokensSoFar:null!==(s=null==Q?void 0:Q.tokensSoFar)&&void 0!==s?s:0,conversationFiles:null!==(l=null==Q?void 0:Q.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:eg,input:M,attachments:K,syncSourceUuids:Y}),ey=(0,E.j)(N),{value:ej}=(0,x.FL)("test_gated_strings"),eb=(0,y.O_)(),ew=i||0===M.length&&0===K.length&&0===V.length&&0===Y.length||eo||W||q||X||$||er||"will-exceed"===ev||ey||(null==Q?void 0:Q.isSampling)===!0,eM=(0,g.useCallback)(async()=>{!ew&&(await J(),d&&d())},[ew,d,J]),ek=(0,g.useCallback)(()=>{es(!0)},[es]),eN=(0,g.useCallback)(()=>{es(!1)},[es]),eC=(0,g.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||en()},[en]),e_=(0,g.useRef)(null),eS=(0,j.aP)(Y).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:Y[t]}}),eE=(0,c.jsx)(f.M,{initial:!1,children:ex&&(0,c.jsx)(h.E.div,{className:"overflow-hidden",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,c.jsx)(C,{isUploadingFile:eo,isUploadingSync:W||q,attachments:K,files:V,syncSourceResults:eS,onRemoveAttachment:e=>{R(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{G(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{ee(t=>t.filter(t=>t!==e))}})},"attachments")});return eb?(0,c.jsxs)(tS,{children:[(0,c.jsxs)(af,{onPasteCapture:e=>{ea&&eh(e)},children:[(0,c.jsx)("input",{ref:e_,id:"chat-input-file-upload","data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...em}),(0,c.jsx)("div",{className:"px-3 md:px-2",children:(0,c.jsx)(w.n,{placement:"bottom"})}),(0,c.jsxs)(ax,{onClick:eC,className:(0,p.Z)(ei&&et&&"animated-loading-background"),children:[(0,c.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,c.jsx)("div",{className:"relative",children:(0,c.jsx)(S.E,{ref:el,prompt:M,setPrompt:T,tipTapEditorState:k,setTipTapEditorState:z,onSubmit:eM,onFocus:ek,onBlur:eN,placement:r,placeholder:null!=o?o:ep?ej?(0,m.lF)({id:"spread_attempt_mind",intl:u}):u.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):ej?(0,m.lF)({id:"window_edge_kiwi",intl:u}):u.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:ef})}),(0,c.jsx)(t6,{placement:r,isDisabled:ew})]}),(0,c.jsx)(nt,{}),eE]}),"bottom"===r&&(0,c.jsx)(ap,{})]}),(0,c.jsx)(ao,{})]}):(0,c.jsxs)(af,{children:[(0,c.jsx)(ax,{className:"bottom"===r?"h-[99px]":"h-[123px]"}),"bottom"===r&&(0,c.jsx)(ap,{})]})});am.displayName="ChatInput";let ax=u.q.div(ad()),ap=u.q.div(ac()),af=u.q.fieldset(au())},30575:function(e,t,n){n.d(t,{n:function(){return eL},c:function(){return eO}});var a=n(27573),s=n(76220),l=n(6766),i=n(27218),r=n(70354),o=n(6385),d=n(53949),c=n(87033),u=n(10228),m=n(88755),x=n(65683),p=n(97695),f=n(7653),h=n(45790),g=n(8905),v=n(92676),y=n(2949),j=n(19132),b=n(61377),w=n(23098),M=n(47082),k=n(10607),N=n(8927),C=n(68425);function _(e){let{warning:t,placement:n,theme:s}=e;return(0,a.jsx)(N.M,{children:t&&(0,a.jsx)(C.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,a.jsx)("div",{className:(0,k.Z)("border-0.5 relative z-[5] px-3.5","bottom"===n?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===s,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===s,"bg-bg-200 border-border-300":"info"===s}),children:t})})})}var S=n(91217),E=n(58183),Z=n(43290),I=n(67311),T=n(49185),A=n(27895),z=n(11607),D=n(52939),R=n(29670),O=n(40287),L=n(33209),F=n(2723),P=n(67587),U=n(32151),G=n(5984);function H(e){let{onReady:t,children:n,onSuccess:s}=e,l=(0,U.useStripe)(),o=(0,U.useElements)(),{account:d}=(0,i.t)(),[c,u]=(0,f.useState)(null),[m,x]=(0,f.useState)(!1),[p,v]=(0,f.useState)(!1),{mutateAsync:y}=(0,g.RF)(),j=async()=>{if(!m&&l&&o){x(!0);try{let e=await o.submit();if(e.error){e.error.message&&u(e.error.message);return}let t=await y(),{error:n}=await l.confirmPayment({elements:o,clientSecret:t.clientSecret,redirect:"if_required"});(null==n?void 0:n.message)&&"validation_error"!==n.type&&u(n.message),n||s()}catch(e){u(e.message)}finally{x(!1)}}};return(0,a.jsxs)(G.l0,{onSubmit:()=>{m||j()},children:[(0,a.jsx)(U.PaymentElement,{id:"payment-element",options:{readOnly:m,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==d?void 0:d.email_address,name:null==d?void 0:d.full_name}}},onReady:()=>{v(!0),t&&t()}}),c&&(0,a.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:c}),(0,a.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[n,(0,a.jsx)(r.z,{type:"submit",loading:m,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!p,children:(0,a.jsx)(h.Z,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,a.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,a.jsx)(h.Z,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function B(e){let{amount:t,currency:n,children:s,className:l,onSuccess:i}=e,r=(0,L.x2)(),[d,c]=(0,f.useState)(!0),{theme:u,mode:m}=(0,P.F)(),x=(0,O.f)().get(o.cn.COLOR_MODE),p={fontSizeBase:"16px",colorBackground:(0,F.J)(u,m,x,"bg-000"),colorText:(0,F.J)(u,m,x,"text-100")},h={mode:"payment",amount:t,currency:null==n?void 0:n.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:p}};return(0,a.jsxs)("div",{className:(0,k.Z)("relative",l),children:[(0,a.jsx)("div",{className:(0,k.Z)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":d}),children:(0,a.jsx)(U.Elements,{options:h,stripe:r,children:(0,a.jsx)(H,{onReady:()=>c(!1),onSuccess:i,children:s})})}),d&&(0,a.jsx)(K,{})]})}let K=()=>(0,a.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,a.jsx)(z.Loading,{})});function V(e){var t,n;let s,{isOpen:l,onClose:r,conversationUUID:o}=e,d=(0,A.e)(),{activeOrganization:c}=(0,i.t)(),u=(0,T.n)(),m=(0,f.useCallback)(()=>{d.addSuccess((0,a.jsx)(h.Z,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&o&&u({type:"within_limit"},c.uuid,o),r()},[null==c?void 0:c.uuid,o,r,d,u]),{data:x,isLoading:p}=(0,g.w3)();return x&&(s=(0,R.xG)(x.price+(null!==(t=x.taxAmount)&&void 0!==t?t:0),x.currency,{preferWholeNumber:!0})),(0,a.jsx)(D.u_,{isOpen:l,onClose:r,title:(0,a.jsx)("div",{className:"text-text-200 font-copernicus text-xl font-medium tracking-tight mt-2",children:(0,a.jsx)(h.Z,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,a.jsx)("div",{className:"flex flex-col px-5 gap-2",children:p||!x?(0,a.jsx)(z.Loading,{size:"sm"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:s}),null===x.taxAmount&&(0,a.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,a.jsx)(h.Z,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,a.jsx)(h.Z,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,a.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,a.jsx)(h.Z,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,a.jsx)(B,{amount:x?x.price+(null!==(n=x.taxAmount)&&void 0!==n?n:0):500,currency:(null==x?void 0:x.currency)||"USD",onSuccess:m})]})})}function Y(e){let{messageLimit:t,placement:n,defaultWarning:s,defaultTheme:l}=e,i=(0,E.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,a.jsx)(_,{theme:"pro",placement:n,warning:(0,a.jsx)(q,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,a.jsx)(_,{theme:"info",placement:n,warning:(0,a.jsx)(W,{messageLimit:t})}):(0,a.jsx)(_,{theme:l,warning:s,placement:n})}let W=e=>{let{messageLimit:t}=e,[n,s]=(0,f.useState)(!1);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,a.jsx)(h.Z,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,a.jsx)(h.Z,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,a.jsx)(r.z,{variant:"unstyled",className:(0,k.Z)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{s(!0)},children:(0,a.jsx)(h.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,a.jsx)(V,{isOpen:n,onClose:()=>s(!1),conversationUUID:t.conversationUUID})]})},q=e=>{let{messageLimit:t}=e,n=Z.ou.fromSeconds(t.resetsAt),[s,l]=(0,f.useState)(!1);return(0,a.jsxs)(I.P,{minimalUi:!0,actionButton:(0,a.jsxs)(r.z,{variant:"unstyled",size:"sm",className:(0,k.Z)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-styrene transition-colors hover:bg-accent-pro-200"),onClick:()=>{l(!0)},children:[(0,a.jsx)(h.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,a.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,a.jsx)(h.Z,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,a.jsx)(h.Z,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,a.jsx)("span",{className:"inline-block",children:n.toLocaleString(Z.ou.TIME_SIMPLE)})}}),(0,a.jsx)(V,{isOpen:s,onClose:()=>l(!1),conversationUUID:t.conversationUUID})]})};var J=n(71912),Q=n(90377),X=n(88146),$=n(40950);function ee(){let e=(0,i.cs)(),t=(0,$.Z)();return(0,a.jsx)(I.P,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,a.jsx)(h.Z,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,a.jsx)(X.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,a.jsx)(h.Z,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var et=n(82056);let en=()=>{let e=(0,et.F)({allowSelfUpgrade:!1});return(0,a.jsx)(I.P,{actionButton:e,children:(0,a.jsx)(h.Z,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var ea=n(85465),es=n(48894);let el=e=>{let{className:t,...n}=e;return(0,a.jsx)("a",{className:(0,k.Z)("text-text-100 font-medium hover:underline",t),...n})},ei=e=>{var t;let n,{inaccessibleSyncSources:s}=e,{chatResourceState:l}=(0,M.Y)(),i=(0,ea.lP)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,es.b)(),d=s.every(e=>e.status.state===u.co.UNAUTHENTICATED)&&1===new Set(s.map(e=>e.type)).size,c=null===(t=s[0])||void 0===t?void 0:t.type,m=(0,a.jsx)("button",{onClick:()=>{o(!0)},children:(0,a.jsx)(el,{children:(0,a.jsx)(h.Z,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:s.length}})})});return d&&null!==c?n=(0,a.jsx)("button",{onClick:()=>i(c),children:(0,a.jsx)(el,{children:(0,a.jsx)(h.Z,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:u.hP[c]}})})}):l.conversationUUID&&!r&&(n=m),(0,a.jsx)(Q.A,{children:(0,a.jsx)(h.Z,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:n}})})};var er=n(41270);let eo=er.z.array(er.z.object({text:er.z.string(),href:er.z.string().optional(),button:er.z.boolean().optional()})).nullable();function ed(e){let{messageComponents:t}=e;return(0,a.jsx)(Q.A,{children:(0,a.jsx)(ec,{messageComponents:t})})}function ec(e){let{messageComponents:t}=e;return(0,a.jsx)("div",{children:t.map((e,t)=>e.button?(0,a.jsx)(r.z,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,a.jsx)(X.default,{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,a.jsx)("span",{children:e.text},t))})}var eu=n(7418),em=n(28803);function ex(){let e=(0,em.$H)("push"),t=()=>{e()};return(0,a.jsx)(I.P,{actionButton:null,children:(0,a.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,a.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:e=>(0,a.jsx)("a",{onClick:t,className:"underline cursor-pointer",children:e})}})})})})})}var ep=n(5161),ef=n(3053),eh=n(95899),eg=n(4746);function ev(e){let{isOpen:t,setIsOpen:n,files:s,isNewConversation:l}=e,i=(0,$.Z)();return(0,a.jsxs)(D.u_,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>n(!1),children:[(0,a.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,a.jsx)("ul",{className:"list-disc pl-4",children:s.map(e=>(0,a.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,a.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,a.jsx)(D.dm,{layout:"right",children:(0,a.jsx)(D.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,a.jsx)(h.Z,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function ey(e){let{files:t,isNewConversation:n}=e,{track:s}=(0,ef.z$)(),{openFeaturePreviewModal:l}=(0,eg.h9)(),[i,r]=(0,f.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev,{isOpen:i,setIsOpen:r,isNewConversation:n,files:t}),(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,a.jsx)("a",{className:"underline",href:"#",onClick:()=>r(!0),children:e})}})}),(0,a.jsx)("div",{children:(0,a.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{s({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,a.jsx)(h.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var ej=n(2210),eb=n(71817),ew=n(18013),eM=n(80151),ek=n(48912);let eN=er.z.object({id:er.z.string(),bodyMd:er.z.string(),isDismissable:er.z.boolean(),proUpsell:er.z.boolean(),alertForModels:er.z.array(er.z.string())}).nullable(),eC=e=>{let t=(0,c.Zr)("claude_ai_system_alerts","alert",null,eN),[n,s]=(0,ew.R)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,eb.wN)(e);return e&&(!l||l.includes(i))&&t&&!n?{systemAlertFromConfig:{alert:t,component:(0,a.jsx)(e_,{alert:t,setHideAlert:s})}}:{}},e_=e=>{let{alert:t,setHideAlert:n}=e,s=(0,i.w7)(),l=(0,et.F)();return(0,a.jsxs)(Q.A,{children:[(0,a.jsx)(ej.J$,{children:(0,a.jsx)(ek.U,{children:t.bodyMd})}),s&&t.proUpsell&&l,t.isDismissable&&(0,a.jsx)(r.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,a.jsx)(eM.X,{size:12})})]})},eS=e=>{let{className:t,...n}=e;return(0,a.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...n})};var eE=n(35548);let eZ=e=>{let t=(0,eE.ZW)(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,em.$H)("push");return(0,a.jsx)(I.P,{actionButton:(0,a.jsx)(eS,{onClick:()=>n({projectUuid:e.projectUuid}),children:(0,a.jsx)(h.Z,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,a.jsx)(h.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.jC,children:e})}}):(0,a.jsx)(h.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.jC,children:e})}})})},eI=()=>(0,a.jsx)(Q.A,{children:(0,a.jsx)(h.Z,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})});var eT=n(18409),eA=n(89313);let ez=e=>{let t;let n=(0,em.$H)("push"),{tokenTotals:s,numAttachments:l,projectKnowledgebaseTokens:i}=e,{msgTokens:r,totalTokens:d,maxConversationTokens:c}=s,u=null!=i?i:0,m=(0,eE.ZW)(u,c),x=d/c-1;return t=l&&m?(0,a.jsx)(h.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:l}}):l?(0,a.jsx)(h.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:l}}):m?(0,a.jsx)(h.Z,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,a.jsx)(h.Z,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,a.jsx)(Q.A,{children:(0,a.jsxs)("span",{children:[(0,a.jsx)(h.Z,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*x),link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.jC,children:e})}}),"\xa0",t,"\xa0",r+u<c&&(0,a.jsx)("a",{className:"underline",href:"#",onClick:()=>n({projectUuid:e.projectUuid}),children:(0,a.jsx)(h.Z,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})};var eD=n(68571);let eR=e=>{let{switchToSonnet:t,dismissOpusHint:n,copyText:s,modelName:l}=e;return(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:s}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,a.jsx)(h.Z,{defaultMessage:"Switch to {modelName}",values:{modelName:l},id:"1APwtKAkCy"})}),"\xa0",n&&(0,a.jsx)(r.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:n,children:(0,a.jsx)(x.X,{size:12})})]})]})})},eO=()=>{let e=(0,j.j5)(u.Fg.GMAIL),t=(0,j.j5)(u.Fg.GCAL),n=(0,y.EU)();return!(0,m.Q)()&&(e||t||n)},eL=e=>{var t,n,r,m,x,y,j,k,N,C,E,Z,I,T,A,z,D,R,O,L,F,P,U,G,H;let B,{placement:K}=e,{prompt:V,isPromptUnsafe:W,model:q,setModel:X,attachments:$,conversation:et,projectUuid:ea,syncSourceUuids:es,files:el}=(0,S.r)(),er=(0,w.nR)(ea),ec=!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,em.cE)(t||""),a=null==n?void 0:null===(e=n.chat_messages)||void 0===e?void 0:e.at(-1);return!!a&&"assistant"===a.sender&&("prompt_injection_risk"===a.stop_reason||"refusal"===a.stop_reason)}(null==et?void 0:et.id)?null:(0,a.jsx)(ex,{}),[ef,eg]=(0,eA.X)({projectUuid:ea,conversationUUID:null!==(n=null==et?void 0:et.id)&&void 0!==n?n:null,conversationTokensSoFar:null!==(r=null==et?void 0:et.tokensSoFar)&&void 0!==r?r:0,conversationFiles:(null!==(m=null==et?void 0:et.files)&&void 0!==m?m:[]).concat(el),projectKnowledgebaseTokens:null!==(x=null==et?void 0:et.projectKnowledgebaseTokens)&&void 0!==x?x:er,input:V,attachments:$,syncSourceUuids:es,chatInputModel:q}),{exceededMessageLimitWarning:ev,approachingMessageLimitWarning:ej,messageLimit:eb}=(0,eu.k)(null!==(y=null==et?void 0:et.id)&&void 0!==y?y:null),ew="exceeded"===ef?(0,a.jsx)(eZ,{projectKnowledgebaseTokens:null!==(j=null==et?void 0:et.projectKnowledgebaseTokens)&&void 0!==j?j:0,maxConversationTokens:eg.maxConversationTokens,projectUuid:ea}):null,{isRavenCanceled:eM}=(0,g.pV)(),ek=eM?(0,a.jsx)(ee,{}):void 0,eN=(0,i.uh)()?(0,a.jsx)(en,{}):void 0,e_=(()=>{let{chatResourceState:e}=(0,M.Y)();return[...e.syncSources||[],...(0,v.yg)(ea).data||[]].filter(e=>{var t;return u.qC.includes(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.state)})})(),eS=e_.length?(0,a.jsx)(ei,{inaccessibleSyncSources:e_}):void 0,{value:eE}=(0,c.FL)("sonnet_3_7_500k"),{allModelOptions:eL}=(0,s.uL)();B=eE?"claude-3-7-sonnet-20250219":"claude-3-5-sonnet-20241022";let eF=null!==(k=null===(t=eL.find(e=>e.model===B))||void 0===t?void 0:t.name)&&void 0!==k?k:"Sonnet",{setStickyModelPreference:eP}=(0,l.M)(),eU=(0,eT.c)(B),eG=(null==q?void 0:q.toLowerCase())!==B.toLowerCase()&&("exceeded"===ef||"will-exceed"===ef)&&eg.totalTokens<eU,eH=(0,f.useCallback)(()=>{X(B),eP(B)},[X,eP,B]),eB=eG?(0,a.jsx)(eR,{switchToSonnet:eH,modelName:eF,copyText:(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.jC,children:e})}})})}):void 0,eK="will-exceed"===ef?(0,a.jsx)(ez,{tokenTotals:eg,numAttachments:$.length,projectKnowledgebaseTokens:null==et?void 0:et.projectKnowledgebaseTokens,projectUuid:ea}):null,eV=eg.msgTokens<1e5?null:(0,a.jsx)(eI,{}),eY=(0,b.F4)(),eW=(0,i.Cf)(),eq=eY&&!eW?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(p.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,eJ=(0,J.j)(ea)?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(p.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:eQ}=eC(null!==(N=null==et?void 0:et.id)&&void 0!==N?N:null),eX=eQ?eQ.component:null,e$=function(e,t,n){let{data:s=[]}=(0,eh.pK)(n),l=(0,ep.eh)(),i=[...e,...t?t.files:[],...s].filter(e=>e.file_kind===d.Y.Blob);return!l&&i.length?(0,a.jsx)(ey,{files:i,isNewConversation:!t}):null}(el,et,ea),e0=function(){let e=(0,c.Zr)("claudeai_warning_message","components",null,eo);return e?(0,a.jsx)(ed,{messageComponents:e}):null}(),e1=eO(),e2=(0,c.FL)("claudeai_unsafe_prompt_inline"),e5=W()&&e1&&e2?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(p.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,e3=$.some(e=>e.origin===d.i.URLParameter)?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(p.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(h.Z,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,e7=null!==(E=null!==(C=null!=ec?ec:e5)&&void 0!==C?C:e3)&&void 0!==E?E:null,e4=null!=eJ?eJ:null,e8=null!==(H=null!==(G=null!==(U=null!==(P=null!==(F=null!==(L=null!==(O=null!==(R=null!==(D=null!==(z=null!==(A=null!==(T=null!==(I=null!==(Z=null!=e7?e7:e4)&&void 0!==Z?Z:ev)&&void 0!==I?I:eB)&&void 0!==T?T:ew)&&void 0!==A?A:ek)&&void 0!==z?z:eN)&&void 0!==D?D:eS)&&void 0!==R?R:eK)&&void 0!==O?O:e$)&&void 0!==L?L:eV)&&void 0!==F?F:eX)&&void 0!==P?P:eq)&&void 0!==U?U:e0)&&void 0!==G?G:ej)&&void 0!==H?H:null,e6=eQ&&eQ.alert.proUpsell,e9=!!(ev||e$||eq||ej),te=e6?"pro":e9?"info":"danger",tt=(0,i.ZJ)(),tn=(0,i.ue)();return!e4&&eb&&(tt||tn)&&(ej||ev)&&!eD.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,a.jsx)(Y,{messageLimit:eb,defaultWarning:e8,defaultTheme:te,placement:K}):(0,a.jsx)(_,{warning:e8,placement:K,theme:te})}},52165:function(e,t,n){n.d(t,{u:function(){return r}});var a=n(27573),s=n(11579),l=n(32737),i=n(22235);let r=e=>{let{model:t,hasMultiModalContent:n,hideModelNameLogo:r}=e,o=t.name.replace("Claude",""),d=(0,i.g)(o,t.model,n),c=o.startsWith("\uD83E\uDD2B")?(0,a.jsx)(l.u,{tooltipContent:d,children:(0,a.jsx)("span",{children:"\uD83E\uDD2B"})}):d;return(0,a.jsxs)("div",{className:"font-tiempos inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!r&&(0,a.jsx)(s.l,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,a.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,a.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:c})})]})}},90377:function(e,t,n){n.d(t,{A:function(){return l}});var a=n(41596);function s(){let e=(0,a._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return s=function(){return e},e}let l=n(9788).q.div(s())},67311:function(e,t,n){n.d(t,{P:function(){return o}});var a=n(27573),s=n(30070),l=n(10607),i=n(7653),r=n(91217);let o=e=>{let{children:t,actionButton:n,title:o,minimalUi:d}=e,{hasBlockingWarning:c,setHasBlockingWarning:u}=(0,r.r)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[c,u]),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsxs)("div",{className:(0,l.Z)("flex flex-row items-center gap-2 md:w-full",d?null:"text-danger-000"),children:[d?null:(0,a.jsx)(s.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsxs)("div",{children:[o&&(0,a.jsx)("div",{className:"text-sm font-medium",children:o}),(0,a.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},82056:function(e,t,n){n.d(t,{F:function(){return o}});var a=n(27573),s=n(8571),l=n(27218),i=n(70354);n(7653);var r=n(45790);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.w7)(),n=(0,l.z6)(),a=(0,l.D)(),i=(0,l.H1)();return(0,s.Z)()?(i||t)&&e?n||a||i?!t&&a?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,a.jsx)(d,{});case"subscribe":return(0,a.jsx)(c,{});case"subscribe-pro-only":return(0,a.jsx)(u,{});case"subscribe-max":return(0,a.jsx)(m,{});case"subscribe-max-20x":return(0,a.jsx)(x,{});case"none":return null}}function d(){let{websiteBaseUrl:e}=(0,s.m)();return(0,a.jsx)(i.z,{href:"".concat(e,"/contact-sales"),children:(0,a.jsx)(r.Z,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(){return(0,a.jsx)(i.z,{href:"/upgrade?hide_free=true",children:(0,a.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,a.jsx)(i.z,{href:"/upgrade/pro",children:(0,a.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,a.jsx)(i.z,{href:"/upgrade?hide_pro=true",children:(0,a.jsx)(r.Z,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function x(){return(0,a.jsx)(i.z,{href:"/upgrade",children:(0,a.jsx)(r.Z,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},7418:function(e,t,n){n.d(t,{j:function(){return w},k:function(){return v}});var a=n(27573),s=n(71817),l=n(49185),i=n(27218),r=n(48410),o=n(70354),d=n(6385),c=n(87033),u=n(80151),m=n(43290),x=n(7653),p=n(45790),f=n(90377),h=n(67311),g=n(82056);let v=e=>{let{messageLimit:t}=(0,i.t)(),{isTierSelectorEnabled:n}=(0,r.i)(),[l,o]=(0,x.useState)(!0),d=(null==t?void 0:t.type)==="within_limit",c=(0,s.wN)(e),u=d?null:null==t?void 0:t.conversationUUID,m=(0,s.wN)(null!=u?u:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&c!==m?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,a.jsx)(y,{messageLimit:t,showTierSelector:n})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:l?(0,a.jsx)(j,{messageLimit:t,onDismiss:()=>o(!1)}):void 0}:{}};function y(e){let{messageLimit:t,showTierSelector:n=!1}=e,s=(0,i.Cf)(),l=(0,i.ZJ)(),r=(0,i.ue)(),o=(0,i.H1)(),c=(0,g.F)(),u=m.ou.fromSeconds(t.resetsAt);return(0,a.jsxs)(h.P,{actionButton:c,minimalUi:!0,children:[n?(0,a.jsx)(p.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):r&&o?(0,a.jsx)(p.Z,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):l||s||r?(0,a.jsx)(p.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):(0,a.jsx)(p.Z,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)}),link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:d.pz,children:e})}}),(0,a.jsx)(b,{messageLimit:t})]})}let j=e=>{let{messageLimit:t,onDismiss:n}=e,s=(0,g.F)(),l=m.ou.fromSeconds(t.resetsAt);return(0,a.jsxs)(f.A,{children:[(0,a.jsx)("span",{className:"font-medium",children:(0,a.jsx)(p.Z,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,a.jsx)("span",{className:"inline-block",children:l.toLocaleString(m.ou.TIME_SIMPLE)})}})}),(0,a.jsxs)("span",{children:[s,(0,a.jsx)(o.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:n,children:(0,a.jsx)(u.X,{size:12})})]})]})},b=e=>{let{messageLimit:t}=e,{mutate:n}=(0,l.I)(t.conversationUUID),{value:s}=(0,c.FL)("can_reset_rate_limits");return s?(0,a.jsx)(o.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:(0,a.jsx)(p.Z,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},w=e=>{var t;let{messageLimit:n,activeOrganization:a}=(0,i.t)(),r=(0,l.n)(),o=(0,s.wN)(e),d=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,c=(0,s.wN)(d);(0,x.useEffect)(()=>{(null==a?void 0:a.uuid)&&n&&"within_limit"!==n.type&&c!==o&&r({type:"within_limit"},a.uuid,e)},[e,c,a,n,o,r])}},89313:function(e,t,n){n.d(t,{X:function(){return o}});var a=n(53949),s=n(66605),l=n(23098),i=n(18409),r=n(35548);let o=e=>{let{projectUuid:t,conversationUUID:n,conversationTokensSoFar:o,conversationFiles:d,projectKnowledgebaseTokens:c,input:u,attachments:m,syncSourceUuids:x,chatInputModel:p}=e,f=(0,l.PE)(t);c=c&&!f?c:0;let h=d.filter(e=>e.file_kind===a.Y.Image),g=o+(0,r.hn)(h)+d.filter(e=>e.file_kind===a.Y.SanitizedDocument).reduce((e,t)=>e+(0,r.ZJ)(t),0)+c,v=(0,r.y1)(u,h,m),y=g+v+(0,s.fg)(x),j=(0,i.e)(n,p),b=null;return g>j?b="exceeded":y>j&&(b="will-exceed"),[b,{conversationTokens:g,msgTokens:v,totalTokens:y,maxConversationTokens:j}]}},71912:function(e,t,n){n.d(t,{j:function(){return s}});var a=n(23098);let s=e=>{let t=(0,a.nR)(e),n=(0,a.mo)();return void 0!==t&&t>n}},22235:function(e,t,n){n.d(t,{g:function(){return o}});var a=n(27573),s=n(32737),l=n(87033),i=n(30070),r=n(45790);function o(e,t,n){let{value:o}=(0,l.FL)("claude_ai_cinnamon"),{value:d}=(0,l.FL)("claude_ai_chili");return o&&d&&void 0!==n&&"claude-3-5-haiku-20241022"===t&&n?(0,a.jsxs)(a.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,a.jsx)(s.u,{tooltipContent:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(r.Z,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,a.jsx)(i.v,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},48894:function(e,t,n){n.d(t,{d:function(){return c},b:function(){return d}});var a=n(27573),s=n(18013),l=n(81695),i=n(7653),r=n(20355);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUUID:n}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[n]=(0,s.R)("".concat(e,":chatControlsSidebarIsOpen"),t);return n}(n),{isExpanded:c,setIsExpanded:u}=(0,r.S)(),[m,x]=(0,i.useState)(d),p=(0,i.useRef)({reopenMain:!1}),f=(0,i.useCallback)(e=>{e&&(c&&(p.current.reopenMain=!0),u(!1)),!e&&p.current.reopenMain&&(p.current.reopenMain=!1,u(!0)),x(e)},[c,u,x]);return(0,a.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:f},children:t})}},4746:function(e,t,n){n.d(t,{FeaturePreview:function(){return T},b5:function(){return Z},h9:function(){return I}});var a=n(27573),s=n(19170),l=n(18916),i=n(3053),r=n(27218),o=n(27895),d=n(9677),c=n(69321),u=n(7276),m=n(52939),x=n(22523),p=n(32737),f=n(87033),h=n(10607),g=n(35919),v=n.n(g),y=n(50294),j=n(7653),b=n(45790),w=n(40950),M=n(41270),k=n(95586),N=n(64014);let C=M.z.object({title:M.z.string(),description:M.z.string(),shortDescription:M.z.string().optional(),titleKey:M.z.string().optional(),descriptionKey:M.z.string().optional(),shortDescriptionKey:M.z.string().optional()}),_=M.z.object({preview_feature_uses_artifacts:C.optional(),preview_feature_uses_latex:C.optional(),preview_feature_uses_citations:C.optional(),preview_feature_uses_harmony:C.optional(),enabled_artifacts_attachments:C.optional(),enabled_turmeric:C.optional(),enabled_gdrive:C.optional(),enabled_bananagrams:C.optional(),enabled_web_search:C.optional(),enabled_sourdough:C.optional(),enabled_foccacia:C.optional(),enabled_monkeys_in_a_barrel:C.optional()}),S={},E=(0,j.createContext)({openFeaturePreviewModal:v()}),Z=e=>{let{children:t}=e,[n,s]=(0,j.useState)(!1);return(0,a.jsxs)(E.Provider,{value:{openFeaturePreviewModal:()=>s(!0)},children:[t,(0,a.jsx)(m.u_,{modalSize:"xl",isOpen:n,onClose:()=>s(!1),hasCloseButton:!0,title:(0,a.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,a.jsx)(T,{})})]})},I=()=>(0,j.useContext)(E);function T(e){let{includeTitle:t}=e,n=function(){let{value:e}=(0,f.FL)("latex_ga"),t=(0,f.Zr)("fp_menu","features",S,_),n=(0,N.i)(),a=(0,k.U)(),{value:s,source:i}=(0,l.h)({}),{preview_feature_uses_artifacts:r,enabled_artifacts_attachments:o,preview_feature_uses_harmony:d,preview_feature_uses_latex:c,...u}=t,m={...u};return!n&&r&&(m.preview_feature_uses_artifacts=r),s&&"experiment"===i&&r||(m.enabled_artifacts_attachments=o),a&&d&&(m.preview_feature_uses_harmony=d),!e&&c&&(m.preview_feature_uses_latex=c),m}();if(!(Object.keys(n).length>0))return;let s=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:"feature-preview",className:"text-text-400 text-sm pt-4 pb-8",children:(0,a.jsx)(b.Z,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(n).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)(a.Fragment,{children:[t>0&&(0,a.jsx)("div",{className:"border-t border-border-300"}),(0,a.jsx)(A,{label:n,...s},n)]})})})]});return t?(0,a.jsxs)(x.QQ,{children:[(0,a.jsx)(u.NZ,{children:(0,a.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"})}),s]}):s}function A(e){var t;let{label:n,...l}=e,u=(0,w.Z)(),{track:m}=(0,i.z$)(),{addSuccess:x}=(0,o.e)(),{account:f}=(0,r.t)(),{mutate:g}=(0,s.Ck)(),{checked:v,disabled:b,tooltipContent:M}=z(n),k=(0,j.useCallback)(()=>{f&&(m({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:f.uuid,feature_id:n,action:!0===v?"disable":"enable"}),x(u.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:v?"disabled":"enabled"})),g({...f.settings,[n]:!v}))},[f,m,n,v,x,u,l.title,g]);return(0,a.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,a.jsx)(y.default,{src:"/images/feature-preview/square/".concat(null!==(t=D[n])&&void 0!==t?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:u.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,a.jsx)("h3",{className:"text-text-100 text-md",children:l.titleKey?(0,a.jsx)(c.d7,{id:l.titleKey}):l.title}),(0,a.jsx)("p",{className:"text-text-100 text-sm",children:l.descriptionKey?(0,a.jsx)(c.d7,{id:l.descriptionKey}):l.description})]}),(0,a.jsx)(p.u,{tooltipContent:M?(0,a.jsx)("div",{className:"text-center",children:M}):null,children:(0,a.jsx)("label",{className:(0,h.Z)(!b&&"cursor-pointer"),children:(0,a.jsx)(d.Z,{disabled:b,checked:!!v,onChange:k},n)})})]})}let z=e=>{var t,n,a;let{account:s}=(0,r.t)(),{value:i}=(0,f.FL)("force_harmony"),{value:o,source:d}=(0,l.h)(null!==(n=null==s?void 0:s.settings)&&void 0!==n?n:{}),c=null!==(a=null==s?void 0:null===(t=s.settings)||void 0===t?void 0:t[e])&&void 0!==a&&a,u="preview_feature_uses_harmony"===e&&i;switch(e){case"preview_feature_uses_harmony":return{checked:i||c,disabled:u,tooltipContent:null};case"enabled_artifacts_attachments":return{checked:"flag"===d&&!!o||c,disabled:u,tooltipContent:null};default:return{checked:c,disabled:u,tooltipContent:null}}},D={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",preview_feature_uses_harmony:"harmony",enabled_artifacts_attachments:"analyse",enabled_turmeric:"harmony",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough"}},1399:function(e,t,n){n.d(t,{NuxProvider:function(){return i},s:function(){return l}});var a=n(27573),s=n(7653);let l=(0,s.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,s.useState)({items:{},currentlyShowing:null}),o=(0,s.useCallback)((e,t)=>{i(n=>{if(n.items[e])return n;let a={...n.items,[e]:t};return{items:a,currentlyShowing:r(a,!0)}})},[]),d=(0,s.useCallback)(e=>{i(t=>{let{[e]:n,...a}=t.items;return{items:a,currentlyShowing:t.currentlyShowing===e?r(a):t.currentlyShowing}})},[]),c={items:n.items,currentlyShowing:n.currentlyShowing,registerNux:o,unregisterNux:d};return(0,a.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let n=Object.entries(e).sort((e,t)=>{let n=e[1].priority||0,a=t[1].priority||0;return n!==a?a-n:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var a,s;return null!==(s=null===(a=n[0])||void 0===a?void 0:a[0])&&void 0!==s?s:null}for(let[e,t]of n)if(t.showAfterOthersDismiss)return e;return null}},63731:function(e,t,n){n.d(t,{Y7:function(){return v},hK:function(){return j},qg:function(){return y}});var a=n(27573),s=n(27218),l=n(5984),i=n(70354),r=n(10228),o=n(7533),d=n(72243),c=n(10607),u=n(7653),m=n(45790),x=n(40950),p=n(59016),f=n(32559),h=n(57393),g=n(53545);let v=(0,a.jsx)(m.Z,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),y=(0,a.jsx)(m.Z,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function j(e){var t,n,j,b,w,M;let{syncSources:k=[],onProjectCreated:N,onError:C,onCancel:_,strings:S}=e,E=(0,x.Z)(),Z=(0,s.Cf)(),I=(0,g.DU)(),{customInstructions:T,type:A,subtype:z}=null!=I?I:{},[D,R]=(0,u.useState)({name:"",description:null!==(t=S.createProjectDescriptionDefault)&&void 0!==t?t:"",type:A,subtype:z,is_private:!0}),[O,L]=(0,u.useState)({}),[F,P]=(0,u.useState)(!1),U=k.length>0,G=k.some(e=>e.type===r.Fg.GITHUB),H=k.some(e=>e.type===r.Fg.GDRIVE),B=G&&H?(0,a.jsx)(m.Z,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):G?(0,a.jsx)(m.Z,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):H?(0,a.jsx)(m.Z,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,a.jsx)(m.Z,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:K}=(0,f.Qs)(),{activeOrganization:V}=(0,s.t)(),{data:Y}=(0,f.Kn)(),{account:W}=(0,s.t)(),{data:q,isLoading:J}=(0,f.O3)(),{data:Q}=(0,p.KJ)(),X=Q&&!U,$=null==q?void 0:q.filter(e=>{var t;return(null===(t=e.creator)||void 0===t?void 0:t.uuid)===(null==W?void 0:W.uuid)&&!e.is_starter_project}),ee=!J&&(null==$?void 0:$.length)===0,et=e=>t=>{R(n=>({...n,[e]:t.target.value})),L(t=>({...t,[e]:null}))},en=e=>{R(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ea=()=>{let e={};return""===D.name.trim()&&(e.name=E.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),L(e),0===Object.keys(e).length},es=async e=>{if(e.preventDefault(),!F&&ea()){P(!0);try{let e={...D};T&&(e.prompt_template=T.replaceAll("{{PROJECT_NAME}}",D.name));let t=await K(e);N(t)}catch(e){C(e)}finally{P(!1)}}};return(0,a.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>es(e),children:[ee&&!I&&(0,a.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,a.jsx)(m.Z,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),Z?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,a.jsxs)("ul",{className:"list-disc pl-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),Y&&(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,a.jsx)(i.z,{variant:"underline",size:"unset",href:"/project/".concat(Y),children:e})}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.oi,{autoFocus:!0,name:"name",className:"w-full",label:null!==(n=S.createProjectNameLabel)&&void 0!==n?n:E.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!==(j=S.createProjectNamePlaceholder)&&void 0!==j?j:E.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:et("name"),error:!!O.name,"data-1p-ignore":!0}),O.name&&(0,a.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:O.name})]}),!I&&(0,a.jsx)("div",{children:(0,a.jsx)(l.Kx,{name:"description",className:"w-full",label:null!==(b=S.createProjectDescriptionLabel)&&void 0!==b?b:E.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!==(w=S.createProjectDescriptionPlaceholder)&&void 0!==w?w:E.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:et("description"),error:O.description})}),Z?(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,a.jsx)(m.Z,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,a.jsxs)("label",{className:(0,c.Z)("mb-2 flex w-full gap-2",!X&&"opacity-40"),children:[(0,a.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!D.is_private,onChange:en,disabled:!X}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(o.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(M=null==V?void 0:V.name)&&void 0!==M?M:(0,a.jsx)(m.Z,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,a.jsx)("div",{className:"text-text-300 text-xs",children:Q?U?B:v:(0,a.jsx)(m.Z,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,a.jsxs)("label",{className:"flex w-full gap-2",children:[(0,a.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:D.is_private,onChange:en}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(d.$,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,a.jsx)(m.Z,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,a.jsx)("div",{className:"text-text-300 text-xs",children:y})]})]})]}):null,(0,a.jsx)("div",{className:"mt-2 flex justify-end",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{onClick:_,href:_?void 0:"/projects",variant:"secondary",disabled:F,children:(0,a.jsx)(m.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(h.e,{children:(0,a.jsx)(i.z,{type:"submit",loading:F,children:(0,a.jsx)(m.Z,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},20355:function(e,t,n){n.d(t,{A:function(){return u},S:function(){return c}});var a=n(27573),s=n(44512),l=n(1133),i=n(6385),r=n(7653),o=n(77879);let d=(0,r.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1});function c(){return(0,r.useContext)(d)}function u(e){let{children:t}=e,[n,c]=(0,s.nh)(i.cn.SIDEBAR_PINNED,!1),[u,m]=(0,s.nh)(i.cn.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:x=0}=(0,o.iP)(),p=0===x?!u:x<1024,[f,h]=r.useState(u&&n);(0,o.OR)("keydown",e=>{var t;let n=(0,l.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),h(e=>!e))});let g=(0,r.useMemo)(()=>({isExpanded:f,setIsExpanded:e=>{h(e),p||c(e)},closeSidebarOnMobile:()=>{p&&f&&h(!1)},isMobile:p}),[f,h,p,c]);return(0,r.useEffect)(()=>{p?(m(!1),h(!1)):(m(!0),h(n))},[p,m,h,n]),(0,a.jsx)(d.Provider,{value:g,children:t})}},74750:function(e,t,n){n.d(t,{k:function(){return s}});var a=n(65654);async function s(e,t,n,s){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[l,i]=e;try{let e=await i.request(t,n,{timeout:5e3,...s});return[l,e]}catch(e){if(e instanceof a.yp&&e.code===a.jK.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(l," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},38622:function(e,t,n){n.d(t,{Tz:function(){return c},Vr:function(){return m},ff:function(){return u}});var a=n(5161),s=n(3053),l=n(27895),i=n(65654),r=n(7653),o=n(91217),d=n(74750);function c(e){let{track:t}=(0,s.z$)(),[n,a]=(0,r.useState)({}),[l,o]=(0,r.useState)({});return(0,r.useEffect)(()=>{let n=!1;async function s(){if(!e)return;let s=await (0,d.k)(e,{method:"resources/list",params:{}},i.Ol,{timeout:6e5}),l=await (0,d.k)(e,{method:"prompts/list",params:{}},i.ev,{timeout:6e5});if(n)return;let r={},c={};Object.entries(s).forEach(e=>{var n,a,s;let[l,i]=e;t({event_key:"mcp.resources.listed",resource_count_on_server:null!==(a=null===(n=i.resources)||void 0===n?void 0:n.length)&&void 0!==a?a:0}),r[l]=(null!==(s=i.resources)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(l).forEach(e=>{var n,a,s;let[l,i]=e;t({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(a=null===(n=i.prompts)||void 0===n?void 0:n.length)&&void 0!==a?a:0}),c[l]=(null!==(s=i.prompts)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),a(r),o(c)}s();let l=setInterval(()=>void s(),6e5);return()=>{n=!0,clearInterval(l)}},[e,t]),{resources:n,prompts:l}}function u(){let{addError:e}=(0,l.e)(),{track:t}=(0,s.z$)(),{handleUpload:n}=(0,o.r)();return(0,r.useCallback)(async(a,s)=>{try{let e=(await a.request({method:"resources/read",params:{uri:s.uri}},i.vg,{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=x(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],s.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Error uploading resource: ".concat(t))}},[t,e,n])}function m(e){let{track:t}=(0,s.z$)(),{addError:n}=(0,l.e)(),{handleUpload:d}=(0,o.r)();return(0,r.useCallback)(async(s,l,r)=>{if(s&&l)try{let n=await s.request({method:"prompts/get",params:{name:l.name,arguments:r}},i.Go,{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(r).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let n=e=>{let t=a.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},s=e=>"".concat(l.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],s("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([x(e.content.data)],s(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(i=t.mimeType)&&void 0!==i?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=n(t.mimeType);return new File([x(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===n.messages.length)await d([o(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(l.name,"_messages.json"),{type:"application/json"}))}await d(e)}null==e||e()}catch(e){n("Error getting prompt: ".concat(e))}},[t,n,d,e])}function x(e){let t=window.atob(e),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return n}},89799:function(e,t,n){n.d(t,{Q:function(){return o}});var a=n(27573);n(10228);var s=n(7653),l=n(66605),i=n(91217),r=n(56971);function o(e){let{uuid:t,syncSource:n,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.us)(),u=(0,s.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.r)();return(0,a.jsx)(r.n4,{location:"chat",projectUuid:m,syncSource:n,handleRemove:d?u:void 0,isEditable:d})}},64014:function(e,t,n){n.d(t,{i:function(){return l}});var a=n(87033),s=n(58183);let l=()=>{let e=(0,s.useLayer)("frontend"),{value:t}=(0,a.FL)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},16173:function(e,t,n){n.d(t,{g:function(){return s}});var a=n(87033);function s(){let{value:e}=(0,a.FL)("trials_and_tribulations_of_high_school_football");return!1}},16282:function(e,t,n){n.d(t,{Xz:function(){return o},a9:function(){return r},kD:function(){return d},mB:function(){return i}});var a=n(27573),s=n(5161),l=n(69735);let i=e=>{let{file:t,size:n,showWarnings:s,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===n?(0,a.jsx)(l.yL,{file:t}):(0,a.jsx)(l.mB,{file:t,showWarnings:s,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,a.jsx)(l.vQ,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,a.jsx)(l.vQ,{title:"Files hidden in shared chats",isError:!0})},33209:function(e,t,n){n.d(t,{MD:function(){return p},S3:function(){return u},x2:function(){return x}});var a=n(13262),s=n(7653),l=n(5362),i=n(8571),r=n(27218),o=n(68571);let d=async e=>{if(o.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await n.e(3338).then(n.bind(n,93338));return t(e)},c=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],u=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.t)(),{data:n,mutate:i,isIdle:o}=(0,l.uC)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[a.CN,null==t?void 0:t.uuid]});return(0,s.useEffect)(()=>{o&&e&&i()},[i,o,e]),n},m=null,x=()=>{let{stripePublishableKey:e}=(0,i.m)();return m||(m=d(e)),m},p=e=>{if(c.includes(e))return e;let t=e.split("-")[0];return c.includes(t)?t:"en"}},69321:function(e,t,n){n.d(t,{ClientIntlProvider:function(){return c},Gc:function(){return m},d7:function(){return u},lF:function(){return x}});var a=n(27573),s=n(43290),l=n(7653),i=n(22247),r=n(45790),o=n(72358);let d=()=>void 0;function c(e){let{locale:t,messages:n,children:r,hideErrors:o}=e;return(0,l.useEffect)(()=>{s.Zr.defaultLocale=t},[t]),(0,a.jsx)(i.Z,{locale:t,messages:n,onError:o?d:void 0,fallbackOnEmptyString:!1,children:r})}function u(e){let{id:t}=e;return(0,a.jsx)(r.Z,{id:(0,o.g2)(t),defaultMessage:" "})}function m(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,o.g2)(t),defaultMessage:" "})}function x(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,o.Y_)(t),defaultMessage:" "})}},7276:function(e,t,n){n.d(t,{GR:function(){return l.QQ},M$:function(){return c},NZ:function(){return u},mH:function(){return d}});var a=n(41596),s=n(9788),l=n(22523);function i(){let e=(0,a._)(["p-4 bg-bg-300 rounded-xl"]);return i=function(){return e},e}function r(){let e=(0,a._)(["basis-0 flex-col gap-1 inline-flex"]);return r=function(){return e},e}function o(){let e=(0,a._)(["items-center gap-2 inline-flex text-text-000 font-styrene font-medium text-lg leading-7"]);return o=function(){return e},e}let d=s.q.div(i()),c=s.q.div(r()),u=s.q.div(o())},11579:function(e,t,n){n.d(t,{l:function(){return s}});var a=n(27573);let s=e=>{let{height:t,className:n}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:n,height:t,fill:"currentColor","aria-label":"Claude",children:(0,a.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},2723:function(e,t,n){n.d(t,{J:function(){return s}});var a=n(7653);let s=(e,t,n,s)=>(0,a.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(s)),")")}},[n,s,t,e])},28386:function(e,t,n){n.d(t,{J:function(){return a}});let a={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}},29670:function(e,t,n){n.d(t,{HY:function(){return i},mz:function(){return s},xG:function(){return a}});let a=function(e,t){let{preferWholeNumber:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let a={minimumFractionDigits:2,maximumFractionDigits:2};n&&e/100%1==0&&(a.minimumFractionDigits=0,a.maximumFractionDigits=0);let s=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof s?s:s[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(a.currencyDisplay="code"),new Intl.NumberFormat(s||void 0,{style:"currency",currency:t,...a}).format(e/100)};function s(e){let{amount:t,currency:n,preferWholeNumber:s}=e;return a(t,n,{preferWholeNumber:s})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!==(t=l[e.toLowerCase()])&&void 0!==t?t:l.usd}},20456:function(e,t,n){var a,s,l,i;n.d(t,{$:function(){return a},s:function(){return s}}),(l=a||(a={})).CLAUDE_CODE="claude_code",l.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",l.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",(i=s||(s={})).INTERACTED="interacted",i.DISMISSED="dismissed"},30131:function(e,t,n){n.d(t,{dI:function(){return d},lE:function(){return o}});var a=n(41270),s=n(87033),l=n(98649);let i=[],r=[];function o(){let e=d(),t=(0,s.Zr)("frontend_fallback_paprika_config","modes",r,c);return e.length>0?e:t}function d(){return(0,s.Zr)("paprika_config","modes",i,c)}let c=a.z.array(a.z.object({id:a.z.string(),title:a.z.string(),description:a.z.string(),description_key:a.z.string().optional(),paprika_mode_value:l.Xs.optional()}))}}]);
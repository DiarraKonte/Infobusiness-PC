"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1060],{6350:function(e,t,s){s.d(t,{t:function(){return r},y:function(){return d}});var n=s(27573),a=s(7653),l=s(6688);let i=(0,a.createContext)(void 0);function r(e){let{project:t,children:s}=e,a=(0,l.k)(t);return(0,n.jsx)(i.Provider,{value:a,children:s})}function d(){return(0,a.useContext)(i)}},96816:function(e,t,s){s.d(t,{H:function(){return r}});var n=s(27573),a=s(32737),l=s(88146),i=s(45790);function r(e){let{children:t}=e;return(0,n.jsx)(a.u,{tooltipContent:(0,n.jsxs)("div",{className:"max-w-48 p-1",children:[(0,n.jsx)("p",{className:"mb-2 whitespace-break-spaces text-xs tracking-tight",children:(0,n.jsx)(i.Z,{defaultMessage:"This is an example project. Create a new project to work with your own documents.",id:"aod9/juMdU"})}),(0,n.jsx)(l.default,{href:"/projects/create",className:"text-accent-secondary-200 text-xs tracking-tight",children:(0,n.jsx)(i.Z,{defaultMessage:"Create new project",id:"a7FtAnfVfj"})})]}),children:t})}},58865:function(e,t,s){s.d(t,{W:function(){return m}});var n=s(27573),a=s(27895),l=s(5984),i=s(70354),r=s(52939),d=s(87033),o=s(88146),c=s(7653),u=s(40950),x=s(45790),f=s(32559);function m(e){let{isOpen:t,onClose:s,project:m}=e,g=(0,u.Z)(),[h,p]=(0,c.useState)(m.prompt_template),[j,v]=(0,c.useState)(!1),{value:y}=(0,d.FL)("claudeai_custom_styles"),{value:w}=(0,d.FL)("claude_ai_cayenne"),{addError:M}=(0,a.e)(),{mutateAsync:b}=(0,f.dY)(m.uuid),S=async()=>{v(!0);try{await b({prompt_template:h}),s(),v(!1)}catch(e){M(g.formatMessage({defaultMessage:"Error saving instructions, please try again later",id:"WL3FdCcP2y"})),v(!1)}},N=m.prompt_template.length>0&&0===h.length,k=w?(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside <link>user preferences</link> and the selected style in a chat.",values:{link:e=>(0,n.jsx)(o.default,{className:"hover:underline",href:"/settings/profile",children:e})},id:"NlixH3av58"}):(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside the selected style in a chat.",id:"rptxrPz/Y3"});return(0,n.jsxs)(r.u_,{isOpen:t,onClose:s,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:(0,n.jsx)(x.Z,{defaultMessage:"Set project instructions",id:"+On7CFwfGv"})}),(0,n.jsxs)("p",{className:"text-text-300 text-sm",children:[(0,n.jsx)(x.Z,{defaultMessage:"Provide Claude with relevant instructions and information for chats within {projectName}.",id:"NM6ePuQ0y+",values:{projectName:m.name}}),"\xa0",y&&k]})]}),(0,n.jsx)("div",{className:"mb-6 mt-3",children:(0,n.jsx)(l.Kx,{"data-testid":"custom-instructions-textarea",value:h,onChange:e=>p(e.target.value),placeholder:[g.formatMessage({defaultMessage:"Think step by step and show reasoning for complex problems. Use specific examples.",id:"j554E3Ar1K"}),g.formatMessage({defaultMessage:"Break down large tasks and ask clarifying questions when needed.",id:"H/tJ47E9to"}),g.formatMessage({defaultMessage:"Use Artifacts only for web apps and code demos.",id:"U50hIJOW7M"}),g.formatMessage({defaultMessage:"When giving feedback, explain thought process and highlight issues and opportunities.",id:"f2YGj7vTV3"})],minRows:16,required:!0,customScrollbar:!0,className:"max-h-80"})}),(0,n.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,n.jsx)(i.z,{variant:"secondary",onClick:s,children:(0,n.jsx)(x.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(i.z,{loading:j,disabled:m.prompt_template===h,onClick:()=>{S()},children:N?(0,n.jsx)(x.Z,{defaultMessage:"Clear instructions",id:"aHS9gkqH/s"}):(0,n.jsx)(x.Z,{defaultMessage:"Save instructions",id:"wtm6MF4hNg"})})]})]})}},62576:function(e,t,s){s.d(t,{U:function(){return A}});var n=s(27573),a=s(7653),l=s(69735),i=s(27895),r=s(70354),d=s(10571),o=s(10228),c=s(32411),u=s(8626),x=s(8927),f=s(68425),m=s(45790),g=s(95899),h=s(92676),p=s(53949);let j=e=>{let{doc:t,canEditKnowledgeBase:s,compressButton:i,...r}=e,{mutate:d}=(0,g.ER)(t.project_uuid),o=(0,a.useMemo)(()=>new TextEncoder().encode(t.content).length,[t]),c={created_at:t.created_at,file_name:t.file_name,file_size:o,file_type:"",extracted_content:t.content,origin:p.i.UserUpload};return(0,n.jsx)(l.mB,{...r,file:c,handleRemove:()=>d({docUuid:t.uuid})})},v=e=>{let{file:t,projectUuid:s,canEditKnowledgeBase:a,...i}=e,{mutate:r,isPending:d}=(0,g.h4)(s);return(0,n.jsx)(l.mB,{...i,file:t,handleRemove:()=>{r({file_uuids:[t.file_uuid]})},isLoading:d})};var y=s(6350),w=s(76742),M=s(36041),b=s(32737),S=s(40845),N=s(30070),k=s(40950),C=s(19132),P=s(56971);function D(e){let{projectUuid:t,syncSource:s,isActionsHidden:l,canEditKnowledgeBase:r,...d}=e,{mutateAsync:c}=(0,h.zB)(t),{isUpdating:u,handleUpdate:x,isFailing:f}=function(e){let{projectUuid:t,syncSource:s}=e,[n,l]=(0,a.useState)(!1),{addSuccess:r}=(0,i.e)(),d=(0,k.Z)(),{mutate:o}=(0,h.l2)(t,{onSuccess:()=>{r(d.formatMessage({defaultMessage:"Sync started",id:"yyuAtTi0E+"}))}});(0,a.useEffect)(()=>{l(!1)},[s.status]);let c=(0,C.sf)(s)||n,u=(0,C.xm)(s),x=(0,a.useCallback)(()=>{c||(l(!0),o({sync_source_uuid:s.uuid,sync_source_config:s.config}))},[c,o,s.config,s.uuid]);return{isUpdating:c,isFailing:u,handleUpdate:x}}({projectUuid:t,syncSource:s});return(0,n.jsx)(P.n4,{...d,location:"project",projectUuid:t,syncSource:s,handleRemove:()=>c(s.uuid),actions:s.type===o.Fg.GITHUB?(0,n.jsx)(Z,{handleUpdate:x,isFailing:f,isSyncing:u}):void 0,isSyncing:u||f})}function Z(e){let{handleUpdate:t,isFailing:s,isSyncing:a}=e,i=(0,k.Z)();return(0,n.jsx)(b.u,{tooltipContent:a?i.formatMessage({defaultMessage:"Syncing...",id:"S92mvo6R0o"}):s?i.formatMessage({defaultMessage:"Sync failed. Click to retry",id:"zOAqlyzs1U"}):i.formatMessage({defaultMessage:"Sync now",id:"SwsYB/OerA"}),children:(0,n.jsx)(l.l1,{className:"!w-[18px] !px-0 shrink-0",onClick:t,children:a?(0,n.jsx)(S.t,{size:12,className:"animate-spin"}):s?(0,n.jsx)(N.v,{size:12}):(0,n.jsx)(S.t,{size:12})})})}s(27218);var _=s(22269);let z="project_syncs",U="project_docs",E="project_linked_files";function A(e){let{project:t,canEditKnowledgeBase:s=!1,isUploadingDoc:i=!1,isUploadingDriveSync:o=!1,isUploadingOutlineSync:u=!1,isUploadingGithubSync:g=!1,setIsUploadingDoc:h,setIsUploadingDriveSync:p,setIsUploadingOutlineSync:w,setIsUploadingGithubSync:b,maxItems:S,onViewAll:N,isEditable:k}=e,{githubSyncSources:C,driveSyncSources:P,outlineSyncSources:Z,projectDocs:A,linkedFiles:L,isFetchingKnowledge:T,knowledgeCount:G}=I({projectUuid:t.uuid,maxItems:S}),{isDeleting:K,selectedItems:V,handleSelect:B,selectAllItems:H,isInSelectionMode:Y,toggleSelectMode:W,handleDeleteSelected:q}=O({githubSyncSources:C,driveSyncSources:P,outlineSyncSources:Z,projectDocs:A,linkedFiles:L,projectUuid:t.uuid,isEnabled:s});F({clearUploadingState:()=>null==h?void 0:h(!1),numItems:A.length+L.length}),F({clearUploadingState:()=>null==b?void 0:b(!1),numItems:C.length}),F({clearUploadingState:()=>null==p?void 0:p(!1),numItems:P.length}),F({clearUploadingState:()=>null==w?void 0:w(!1),numItems:Z.length});let J=new Set(V.map(e=>{let{uuid:t}=e;return t})),X=(0,y.y)();if(T)return(0,n.jsx)(d.g,{height:65,className:"opacity-25 rounded-lg mb-3 mt-3"});if(0===G&&!i)return(0,n.jsx)(R,{canEditKnowledgeBase:s,projectStrings:X});let Q=(0,n.jsx)(x.M,{children:Y&&(0,n.jsx)(f.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-auto",children:(0,n.jsx)("div",{className:"flex mt-3 gap-2 justify-end",children:(0,n.jsx)(M.J,{isLoading:K,numSelected:V.length,totalNumItems:G,handleSelectAll:H,handleCancel:()=>W(!1),handleDeleteSelected:q})})},"item-management-menu")}),$={size:"stretch",isEditable:k,isInSelectionMode:Y};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.M,{children:s&&(0,n.jsx)(f.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,n.jsx)(_.n,{projectUuid:t.uuid})})}),(0,n.jsx)("ul",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-3",children:(0,n.jsxs)(x.M,{initial:!1,children:[(0,n.jsx)(l.fz,{isShown:o,...$}),P.map(e=>(0,n.jsx)(D,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:Y||!s,...$,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)},e.uuid)),(0,n.jsx)(l.fz,{isShown:u,...$}),Z.map(e=>(0,n.jsx)(D,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:Y||!s,...$,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)},e.uuid)),(0,n.jsx)(l.fz,{isShown:g,...$}),C.map(e=>(0,a.createElement)(D,{...$,key:e.uuid,projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:Y||!s,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)})),(0,n.jsx)(l.fz,{isShown:i,...$}),A.map(e=>(0,a.createElement)(j,{...$,key:e.uuid,doc:e,canEditKnowledgeBase:s,compressButton:void 0,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:U},t,s)})),L.map(e=>(0,a.createElement)(v,{...$,key:e.file_uuid,file:e,projectUuid:t.uuid,canEditKnowledgeBase:s,handleSelect:(t,s)=>B({uuid:e.file_uuid,type:E},t,s),isSelected:J.has(e.file_uuid)}))]})}),Q,!!N&&!!S&&G>S&&(0,n.jsx)("div",{children:(0,n.jsxs)(r.z,{variant:"unstyled",onClick:N,className:"hover:text-text-000 hover:underline !px-0 text-sm",children:[(0,n.jsx)(m.Z,{defaultMessage:"View all {count} files",id:"b36mSZ46cW",values:{count:G}}),(0,n.jsx)(c.o,{size:16,className:"inline-block pl-1"})]})})]})}let F=e=>{let{clearUploadingState:t,numItems:s}=e,n=(0,a.useRef)(s);(0,a.useEffect)(()=>{s>n.current&&t(),n.current=s},[s,t])},I=e=>{let{projectUuid:t,maxItems:s}=e,{data:n=[],isLoading:a}=(0,g.Kf)(t),l=[...n],{data:i=[],isLoading:r}=(0,h.yg)(t),{data:d=[]}=(0,g.pK)(t),c=[...d],u=i.filter(e=>{let{type:t}=e;return t===o.Fg.GDRIVE}),x=i.filter(e=>{let{type:t}=e;return t===o.Fg.OUTLINE}),f=i.filter(e=>{let{type:t}=e;return t===o.Fg.GITHUB});if(s){let e=s;[u,x,f,l,c].forEach(t=>{t.splice(e),e=Math.max(0,e-t.length)})}let m=[l,i,c].reduce((e,t)=>{var s;return e+(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0)},0);return{driveSyncSources:u,outlineSyncSources:x,githubSyncSources:f,projectDocs:l,linkedFiles:c,isFetchingKnowledge:a||r,knowledgeCount:m}},O=e=>{let{githubSyncSources:t,driveSyncSources:s,outlineSyncSources:n,projectDocs:a,linkedFiles:l,projectUuid:r,isEnabled:d}=e,o=s.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}}).concat(t.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}})).concat(n.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}})).concat(a.map(e=>{let{uuid:t}=e;return{type:U,uuid:t}})).concat(l.map(e=>{let{file_uuid:t}=e;return{type:E,uuid:t}})),{selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:f,toggleSelectMode:m}=(0,w.M)(o,!d),{addError:p}=(0,i.e)(),{mutateAsync:j,isPending:v}=(0,h.IP)(r),{mutateAsync:y,isPending:M}=(0,g.op)(r),{mutateAsync:b,isPending:S}=(0,g.h4)(r),N=async()=>{let e=c.filter(e=>{let{type:t}=e;return t===U}),t=c.filter(e=>{let{type:t}=e;return t===z}),s=c.filter(e=>{let{type:t}=e;return t===E});m(!1);try{await Promise.all([e.length?y({doc_uuids:e.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),t.length?j({sync_source_uuids:t.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),s.length?b({file_uuids:s.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve()])}catch(e){p("Something went wrong while deleting. Refresh the page and try again")}};return{isDeleting:M||v||S,selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:f,toggleSelectMode:m,handleDeleteSelected:N}},R=e=>{var t,s;let{canEditKnowledgeBase:a,projectStrings:l}=e;return(0,n.jsxs)("div",{className:"bg-bg-500/10 text-text-400 mb-1 mt-2 flex w-full flex-col items-center gap-3 rounded-lg px-6 pb-10 pt-8 text-center text-sm",children:[(0,n.jsx)(u.g,{size:36,weight:"thin"}),a?null!==(t=null==l?void 0:l.projectNoKnowledgeCanAddMessage)&&void 0!==t?t:(0,n.jsx)(m.Z,{defaultMessage:"No knowledge added yet. Add PDFs, documents, or other text to the project knowledge base that Claude will reference in every project conversation.",id:"j7/C6AKAfW"}):null!==(s=null==l?void 0:l.projectNoKnowledgeCantAddMessage)&&void 0!==s?s:(0,n.jsx)(m.Z,{defaultMessage:"No knowledge added yet.",id:"frsVQgI4+c"})]})}},22269:function(e,t,s){s.d(t,{n:function(){return er},l:function(){return ee}});var n=s(27573),a=s(26525),l=s(5161),i=s(27218),r=s(27895),d=s(5984),o=s(32006),c=s(70354),u=s(45033),x=s(52939),f=s(32737),m=s(44512),g=s(13262),h=s(87033),p=s(10228),j=s(34505),v=s(89755),y=s(37141),w=s(11919),M=s(49454),b=s(77930),S=s(10607),N=s(7653),k=s(40950),C=s(45790),P=s(95899),D=s(32559),Z=s(2949),_=s(89111),z=s(74339),U=s(23098),E=s(96816),A=s(79208),F=s(31275),I=s(1154),O=s(30684),R=s(86973),L=s(66605),T=s(92676),G=s(9677),K=s(85465);function V(e){let{conversation:t}=e,s=(0,Z.ez)(),a=(0,Z.EU)(t),{toggleConversationSetting:l}=(0,K.M0)();return s?(0,n.jsx)("div",{className:"px-2 py-1.5 -mx-1 -mb-1 border-t-0.5 border-border-300 hover:bg-bg-200",children:(0,n.jsxs)(u.hP,{className:"flex flex-row gap-4 cursor-pointer px-2 pt-1 pb-2",onSelect:e=>{e.stopPropagation(),e.preventDefault(),l("enabled_bananagrams",!a)},onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{children:(0,n.jsx)(C.Z,{defaultMessage:"Allow Claude to search",id:"zyxxt7OHPv"})}),(0,n.jsx)("p",{className:"text-xs text-text-400",children:(0,n.jsx)(C.Z,{defaultMessage:"Claude will search for relevant documents",id:"JxbYvAvtdV"})})]}),(0,n.jsx)(G.Z,{checked:a,readOnly:!0})]})}):null}var B=s(84344),H=s(10571);function Y(e){let{title:t,url:s,isLoading:a,isError:l,isLink:i=!1,defaultErrorTitle:r,defaultDocumentTitle:d}=e,o=(0,n.jsx)("p",{children:d});return(l?o=(0,n.jsx)("p",{children:r}):!a||t||d?t&&(o=(0,n.jsx)("p",{children:t})):o=(0,n.jsx)(H.g,{className:"opacity-25 rounded-md",height:18}),i&&s)?(0,n.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:o}):o}function W(e){let{uri:t,isError:s,isLink:a=!1}=e,{data:l,isLoading:i}=(0,Z.Mv)({documentId:t}),r=(0,B.m)(t);return(0,n.jsx)(Y,{title:null==l?void 0:l.title,url:r,isLoading:i,isError:s,isLink:a,defaultErrorTitle:"Google Docs"})}var q=s(70712),J=s(56767);let X={includeScore:!0,threshold:.3,keys:["title"],ignoreLocation:!0},Q=e=>{let{conversation:t,projectUuid:s,trigger:a,align:l,isSubDropdown:i=!1,setIsUploadingDriveSync:o,onCreated:c,isOpen:x,setIsOpen:f,closeWholeDropdown:g=()=>f(!1),shouldAddSyncUponPaste:j}=e,v=(0,k.Z)(),{value:y}=(0,h.FL)("kingfisher_prefetch"),{recentDriveDocs:w,isLoading:M}=(0,Z.td)(y||x),[b,S]=(0,N.useState)(""),[C,P]=(0,N.useState)(!1),[D,_]=(0,N.useState)(""),{addError:z}=(0,r.e)(),U=(0,N.useRef)(null),E=(0,N.useRef)(null),A=()=>{o(!0),P(!0)},F=e=>{null==c||c(e),g(),P(!1)},I=e=>{o(!1),P(!1),z((0,J.A)(e))},{mutate:O}=(0,L.cE)({onMutate:A,onSuccess:F,onError:I,meta:{noToast:!0}}),{mutate:G}=(0,T.gr)(s,{onMutate:A,onSuccess:F,onError:I,meta:{noToast:!0}}),K=(0,N.useMemo)(()=>w&&b?new R.Z(w,X).search(b).map(e=>e.item):w,[w,b]),B=b?null==K?void 0:K.slice(0,7):null==w?void 0:w.slice(0,5),H=e=>{g(),(s?G:O)({sync_source_type:p.Fg.GDRIVE,sync_source_config:{uri:e}})},Y=e=>{let t=(0,q.g)(e);S(e);let s="";if(t)H(t);else if((0,q.k)(e))s=v.formatMessage({defaultMessage:"Only Google Docs are supported at this time",id:"P3m20xflVA"});else try{new URL(e),s=v.formatMessage({defaultMessage:"Not a valid Google Doc URL",id:"S//j6oF0j8"})}catch(e){}_(s)};(0,m.pp)({target:U,shouldFocus:x}),(0,N.useEffect)(()=>{x||(S(""),P(!1),_(""))},[x,S,P,_]);let W=!!s,Q=i?u.A2:u.Lt;return(0,n.jsxs)(Q,{className:"text-md w-[332px] p-0 overflow-hidden",align:l,trigger:a,onKeyDown:e=>{if(!["Enter","ArrowDown","ArrowUp"].includes(e.key)){var t;null===(t=U.current)||void 0===t||t.focus()}},onFocusOutside:e=>e.preventDefault(),...i?{forceMount:!0}:{open:x,onOpenChange:f,unstyledTrigger:!0},children:[(0,n.jsx)(u.YG,{children:(0,n.jsx)(d.oi,{ref:U,value:b,placeholder:v.formatMessage({defaultMessage:"Search recents or paste URL",id:"jprBObbn5b"}),className:"w-full bg-inherit border-none select-none",onChange:e=>{Y(e.target.value)},onPasteCapture:e=>{if(e.stopPropagation(),!x)return;let t=e.clipboardData.getData("text"),s=(0,q.g)(t);s&&j&&H(s)},onKeyDown:e=>{if("ArrowLeft"===e.key&&b)e.stopPropagation();else if("Enter"===e.key)Y(e.currentTarget.value);else if("ArrowDown"===e.key&&B&&B.length>0){var t;e.preventDefault(),null===(t=E.current)||void 0===t||t.focus()}},"data-1p-ignore":!0,autoComplete:"off",autoFocus:!0})}),(0,n.jsx)($,{inputRef:U,firstDocumentRef:E,handleAddDocument:H,documents:B,isValidatingUrl:C,isFetchingRecentDriveDocs:M,errorMessage:D}),!W&&!b&&(0,n.jsx)(V,{conversation:t})]})},$=e=>{let{inputRef:t,firstDocumentRef:s,handleAddDocument:a,documents:l,isValidatingUrl:i,isFetchingRecentDriveDocs:r,errorMessage:d}=e,c=i||r&&!l.length,x=!!d,f=!c&&(!l||!l.length);return c?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:(0,n.jsx)(I.$,{className:"animate-spin mx-auto"})}):x?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px] text-center",children:[(0,n.jsx)(O.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,n.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,n.jsx)(C.Z,{defaultMessage:"Invalid URL",id:"SASA4f9KO3"})}),(0,n.jsx)("p",{className:"text-sm text-danger-000",children:d})]}):f?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:[(0,n.jsx)(O.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,n.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,n.jsx)(C.Z,{defaultMessage:"No recents found",id:"2FzJykASLO"})}),(0,n.jsx)("p",{className:"text-sm text-text-500",children:(0,n.jsx)(C.Z,{defaultMessage:"Try pasting the URL instead",id:"jf3/+bX0lc"})})]}):(0,n.jsx)("div",{className:"px-1.5 py-1",children:l.map((e,l)=>{let{uri:i,title:r}=e;return(0,n.jsxs)(u.hP,{className:"!grid-cols-[max-content_auto] hover:text-text-000 hover:bg-bg-200",ref:0===l?s:void 0,onClick:()=>a(i),onKeyDown:e=>{if("ArrowUp"===e.key&&0===l){var s;e.preventDefault(),null===(s=t.current)||void 0===s||s.focus()}},textValue:"",onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,n.jsx)(o.j0,{type:p.Fg.GDRIVE,variant:o.cT.DOCS,size:16}),(0,n.jsx)("span",{className:"truncate",children:null!=r?r:(0,n.jsx)(W,{uri:i})})]},i)})})},ee=e=>{let{projectUuid:t,isStarterProject:s,isUploading:d,setIsUploadingDoc:o,setIsUploadingGithubSync:c,setIsUploadingDriveSync:u,setIsUploadingOutlineSync:x}=e,{activeOrganization:f}=(0,i.t)(),m=null==f?void 0:f.uuid,p=(0,k.Z)(),j=(0,N.useRef)(null),[v,y]=(0,N.useState)(""),[w,M]=(0,N.useState)(""),[S,E]=(0,N.useState)(!1),[A,I]=(0,N.useState)(!1),[O,R]=(0,N.useState)(!1),[L,T]=(0,N.useState)(!1),{addError:G}=(0,r.e)(),{mutateAsync:K}=(0,P.u3)(t,{onError:()=>o(!1)}),{data:V}=(0,D.Yc)(t),{checkIsGithubAuthenticated:B,initGithubAuth:H}=(0,_.Yn)({callerIdentifier:"project",toggleGithubModalOpen:I}),Y=(0,_.H7)(),{isOutlineAuthenticated:W}=(0,z.vc)(),q=(0,z.J$)(),J=(0,Z.Aj)(),X=(0,U.nR)(t),Q=(0,U.mo)(),$=(null!=X?X:0)>Q,ee=(0,U.PE)(t),es=(0,N.useRef)(void 0);(0,N.useEffect)(()=>{!1===es.current&&!0===ee&&T(!0),es.current=ee},[ee]);let en=(0,b.useQueryClient)(),ea=(0,N.useCallback)(async(e,s)=>{for(let t of e)await K({file_name:t.file_name,content:t.extracted_content});s.length&&en.invalidateQueries({queryKey:[g.jb,{orgUuid:m,projectUuid:t}]})},[K,m,t,en]),er=(0,l.eh)(),ed=(0,a.H0)(),{value:eo}=(0,h.FL)("project_janus"),{value:ec}=(0,h.FL)("project_image"),{handleUpload:eu}=(0,a.Vn)({imagesEnabled:ec,blobFileUploadsEnabled:er,rasterizePdfUploadsEnabled:ed&&eo,onUploadComplete:async function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];await ea(...t)},onError:()=>{o(!1)},projectUuid:t}),ex=(0,N.useCallback)(async e=>{let t=e.target.files;t&&(o(!0),await eu(Array.from(t),Q-(null!=X?X:0)),o(!1)),e.target.value=""},[eu,o,X,Q]),ef=async()=>{try{E(!1),o(!0),await K({file_name:w,content:v}),M(""),y("")}catch(e){o(!1),G(p.formatMessage({defaultMessage:"Error saving text content",id:"9U64gLEIVo"}))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{"data-testid":"project-doc-upload",ref:j,type:"file",className:"hidden",accept:(0,l.tB)({imagesEnabled:ec,outOfContextFilesEnabled:er}).join(","),onChange:ex,multiple:!0}),(0,n.jsx)(et,{projectUuid:t,shouldShowGithubSyncSource:Y,shouldShowDriveSyncSource:J,shouldShowOutlineSyncSource:q,handleGithubClick:()=>{B().then(e=>{if(e){I(!0);return}H()})},handleOutlineClick:()=>{W?R(!0):G((0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("div",{children:(0,n.jsx)(C.Z,{defaultMessage:"You need to connect to Outline before using this feature.",id:"PejG+e4wN5"})}),(0,n.jsx)("button",{onClick:()=>{window.location.href="/settings/profile"},className:"mt-2 underline",children:(0,n.jsx)(C.Z,{defaultMessage:"Connect to Outline",id:"m1DuTWXorQ"})})]}))},handleFileUploadClick:()=>{j.current&&j.current.click()},handleTextContentClick:()=>E(!0),isPrivateProject:!!(null==V?void 0:V.is_private),isStarterProject:s,isOverProjectKnowledgeLimit:$,isLoading:d,setIsUploadingDriveSync:u}),(0,n.jsx)(el,{isOpen:S,onClose:()=>E(!1),title:w,setTitle:M,content:v,setContent:y,onSave:ef}),Y&&(0,n.jsx)(F.U,{location:"project",isOpen:A,onClose:()=>I(!1),projectUuid:t,setIsUploadingGithubSync:c}),q&&"",(0,n.jsx)(ei,{isOpen:L,onClose:()=>T(!1)})]})},et=e=>{let{projectUuid:t,shouldShowGithubSyncSource:s,shouldShowDriveSyncSource:a,handleGithubClick:l,handleFileUploadClick:i,handleTextContentClick:r,isPrivateProject:d,isStarterProject:o,isOverProjectKnowledgeLimit:c,isLoading:x,shouldShowOutlineSyncSource:f,handleOutlineClick:m,setIsUploadingDriveSync:g}=e,[h,v]=(0,N.useState)(!1),[y,M]=(0,N.useState)(!1),b=a||s,{isDriveAuthenticated:S,initDriveAuth:k,handleDriveTrigger:P}=(0,Z.nC)({callerIdentifier:"project",handleAuthSuccess:e=>{v(e),e?setTimeout(()=>{M(e)},100):M(e)}}),D=S&&d;return(0,n.jsxs)(u.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsx)(es,{isStarterProject:o,isOverProjectKnowledgeLimit:c,isLoading:x}),open:h,onOpenChange:v,children:[(0,n.jsx)(u.hP,{onClick:i,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(w.p,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(u.hP,{onClick:r,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j.P,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})]})}),b?(0,n.jsx)(u.u2,{}):null,s&&(0,n.jsx)(en,{type:p.Fg.GITHUB,isPrivateProject:d,onClick:l}),a&&(0,n.jsx)(ea,{projectUuid:t,isPrivateProject:d,setIsUploadingDriveSync:g,isOpen:y,setIsOpen:M,closeWholeDropdown:()=>{M(!1),v(!1)},showGoogleDriveSubDropdown:D,handleGoogleDriveButtonClick:()=>{!D&&d&&(S?P():k())}}),f&&(0,n.jsx)(en,{type:p.Fg.OUTLINE,isPrivateProject:d,onClick:m})]})},es=(0,N.forwardRef)((e,t)=>{let{isStarterProject:s,isOverProjectKnowledgeLimit:a,isLoading:l,...i}=e,r=(0,n.jsx)(c.z,{...i,ref:t,className:"bg-inherit border-0.5 hover:bg-bg-300/70 border-border-300 transition rounded-lg  scale-100",size:"icon_sm",variant:"unstyled","data-testid":"project-doc-uploader-dropdown-trigger",disabled:s||a||l,loading:l,children:(0,n.jsx)(v.v,{size:14,weight:"bold"})});return s?(0,n.jsx)(E.H,{children:(0,n.jsx)("div",{children:r})}):a?(0,n.jsx)(f.u,{side:"bottom",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge at capacity. Remove an existing file in order to add to knowledge",id:"g3hx72ya32"}),children:(0,n.jsx)("div",{children:r})}):(0,n.jsx)(f.u,{side:"bottom",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Add content to project",id:"kLVlcps4zm"}),children:r})});es.displayName="ProjectDocUploaderDropdownTrigger";let en=e=>{let{type:t,isPrivateProject:s,isSubTrigger:a=!1,isSubDropdownOpen:l=!1,onClick:i}=e,r=a?u.WR:u.hP,d=(0,n.jsxs)(r,{onClick:i,onPointerLeave:e=>{a&&l&&e.preventDefault()},onPointerMove:e=>{a&&l&&e.preventDefault()},disabled:!s,className:"text-left",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.j0,{type:t,size:16}),(0,A.DH)(t)]}),a&&(0,n.jsx)(y.T,{size:16})]});return s?d:(0,n.jsx)(f.u,{side:"left",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Only accessible from private projects",id:"lNrma+LwGe"}),children:(0,n.jsx)("div",{children:d})})},ea=e=>{let{projectUuid:t,isPrivateProject:s,setIsUploadingDriveSync:a,isOpen:l,setIsOpen:i,closeWholeDropdown:r,showGoogleDriveSubDropdown:d,handleGoogleDriveButtonClick:o}=e;return d?(0,n.jsxs)(u.Vy,{open:l,onOpenChange:i,children:[(0,n.jsx)(en,{type:p.Fg.GDRIVE,isPrivateProject:s,isSubTrigger:!0,isSubDropdownOpen:l}),(0,n.jsx)(u.nI,{children:(0,n.jsx)(Q,{projectUuid:t,isSubDropdown:!0,setIsUploadingDriveSync:a,isOpen:l,setIsOpen:i,closeWholeDropdown:r,shouldAddSyncUponPaste:!0})})]}):(0,n.jsx)(en,{type:p.Fg.GDRIVE,isPrivateProject:s,onClick:o})},el=e=>{let{isOpen:t,onClose:s,title:a,setTitle:l,content:i,setContent:r,onSave:o}=e,u=(0,k.Z)(),f=(0,N.useRef)(null);return(0,m.pp)({shouldFocus:t,target:f}),(0,n.jsx)(x.u_,{isOpen:t,onClose:s,modalSize:"xl",className:"p-7 pt-6",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==a.trim()&&""!==i.trim()&&o()},children:[(0,n.jsx)("h2",{className:"font-tiempos mb-3 text-xl",children:(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})}),(0,n.jsx)(d.oi,{ref:f,placeholder:u.formatMessage({defaultMessage:"Name your content",id:"C7Sx4g/l21"}),className:"mb-2 w-full",size:"lg",label:(0,n.jsx)(C.Z,{defaultMessage:"Title",id:"9a9+wwWy4u"}),value:a,onChange:e=>l(e.target.value),required:!0}),(0,n.jsx)(d.Kx,{placeholder:u.formatMessage({defaultMessage:"Type or paste in content...",id:"f5RDuqxeT2"}),label:u.formatMessage({defaultMessage:"Content",id:"Jq3FDzj0/T"}),minRows:12,value:i,onChange:e=>r(e.target.value),required:!0,className:"max-h-[50vh] overflow-y-auto"}),(0,n.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,n.jsx)(c.z,{variant:"secondary",onClick:e=>{e.preventDefault(),s()},children:(0,n.jsx)(C.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(c.z,{type:"submit",children:(0,n.jsx)(C.Z,{defaultMessage:"Add Content",id:"66s1201qd9"})})]})]})})},ei=e=>{let{isOpen:t,onClose:s}=e;return(0,n.jsx)(x.u_,{isOpen:t,onClose:s,modalSize:"md",className:"p-12",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"mb-4 text-xl font-medium",children:(0,n.jsx)(C.Z,{defaultMessage:"Project switched to retrieval mode",id:"1gkus7XR1T"})}),(0,n.jsxs)("div",{className:"text-text-300 mb-6 text-sm",children:[(0,n.jsx)("p",{className:"mb-4",children:(0,n.jsx)(C.Z,{defaultMessage:"Your project has reached a size where Claude now searches for information as needed, instead of loading everything at once. This may affect response speed and comprehensiveness.",id:"HP8UNRs/QI"})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:(0,n.jsx)(C.Z,{defaultMessage:"Want to switch back?",id:"T4F8fLhXYq"})}),(0,n.jsx)("span",{children:(0,n.jsx)(C.Z,{defaultMessage:" Remove some files to return to standard mode.",id:"qzyg/oISDl"})})]})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(c.z,{onClick:s,children:(0,n.jsx)(C.Z,{defaultMessage:"Got it",id:"NYTGIbSNz5"})})})]})})},er=e=>{let{size:t="default",projectUuid:s,tooltipContent:a}=e,l=(0,U.nR)(s),i=(0,U.mo)(),r=(0,U.i6)(),d=(0,U.PE)(s);if(!l)return null;let o=Math.ceil(l/i*100),u=o>80&&o<100,x=o>=100;return(0,n.jsxs)("div",{className:(0,S.Z)("default"!==t&&"flex items-center gap-3"),children:[(0,n.jsx)("div",{className:(0,S.Z)("bg-bg-300 rounded-full p-px border-border-300 border-0.5","small"===t&&"w-24"),children:(0,n.jsx)("div",{style:{width:"".concat(Math.max(2,Math.min(100,o)),"%")},className:(0,S.Z)("h-1.5 rounded-full transition-all",!u&&!x&&"bg-accent-secondary-100",u&&"bg-warning-orange",x&&"bg-danger-100")})}),(0,n.jsxs)("div",{className:(0,S.Z)("flex gap-2 items-center text-xs","default"===t&&"mt-2"),children:[(0,n.jsx)("div",{className:(0,S.Z)("flex-1",o<100&&"text-text-400",o>=100&&"text-danger-000 font-medium"),children:(0,n.jsx)(C.Z,{defaultMessage:"{pctUsed}% of knowledge capacity used",id:"2JyXZfrx4Q",values:{pctUsed:o}})}),!r&&(0,n.jsx)(f.u,{className:"text-center mt-0.5",side:"left",tooltipContent:null!=a?a:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge is currently limited to Claude’s maximum context window size.",id:"aAeavdIV/P"}),children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(c.z,{size:"unset",variant:"unstyled",href:"https://support.anthropic.com/en/articles/9517075-what-are-projects",target:"_blank",className:"rounded-full text-text-500 hover:text-text-200",children:(0,n.jsx)(M.k,{size:14})})})}),d&&(0,n.jsx)(f.u,{className:"text-center mt-0.5",side:"left",tooltipContent:null!=a?a:(0,n.jsx)(C.Z,{defaultMessage:"Claude now searches for information as needed, rather than loading everything at once. This may affect response speed and comprehensiveness. To switch back, remove some files.",id:"LA805l4gD3"}),children:(0,n.jsxs)("div",{className:"text-text-400 text-xs flex gap-1",children:[(0,n.jsx)(C.Z,{defaultMessage:"Retrieval Mode",id:"OfvCtGwDIe"}),(0,n.jsx)(M.k,{size:16})]})})]}),o>=100&&(0,n.jsx)("div",{className:"text-text-400 text-xs",children:(0,n.jsx)(C.Z,{defaultMessage:"Remove an existing file in order to add to knowledge",id:"mSQjDnX2IA"})})]})}},79208:function(e,t,s){s.d(t,{DH:function(){return l},pz:function(){return a}});var n=s(10228);let a="settings",l=e=>n.hP[e]||e},76742:function(e,t,s){s.d(t,{M:function(){return a}});var n=s(7653);let a=(e,t)=>{let[s,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),r=(s,n)=>{t||i(t=>{if(!n||0===Object.keys(t).length)return[...t,s];let a=t[Object.keys(t).length-1],l=e.findIndex(e=>{let{uuid:t,type:s}=e;return t===a.uuid&&s===a.type});if(-1===l)return[...t,s];let i=e.findIndex(e=>{let{uuid:t}=e;return t===s.uuid}),r=e.slice(Math.min(l+1,i),Math.max(l-1,i)+1),d=t.map(e=>{let{uuid:t}=e;return t});return[...t,...r.filter(e=>{let{uuid:t}=e;return -1===d.indexOf(t)})]})},d=e=>{t||i(t=>t.filter(t=>{let{uuid:s,type:n}=t;return s!==e.uuid||n!==e.type}))};return(0,n.useEffect)(()=>{a(l.length>0)},[l]),{selectedItems:l,handleSelect:(e,s,n)=>{t||(s?r(e,n):d(e))},selectAllItems:()=>{t||i(e)},isInSelectionMode:!t&&s,toggleSelectMode:e=>{a(e),e||i([])}}}},36041:function(e,t,s){s.d(t,{J:function(){return i}});var n=s(27573),a=s(70354);s(7653);var l=s(45790);let i=e=>{let{isLoading:t,numSelected:s,totalNumItems:i,handleSelectAll:r,handleCancel:d,handleDeleteSelected:o}=e;return(0,n.jsxs)(n.Fragment,{children:[s<i&&(0,n.jsx)(a.z,{variant:"underline",className:"text-sm rounded-md text-accent-secondary-000 mr-2 !opacity-100 h-8",size:"unset",onClick:r,children:(0,n.jsx)(l.Z,{defaultMessage:"Select all",id:"94Fg25VD0N"})}),(0,n.jsx)(a.z,{size:"sm",variant:"secondary",onClick:d,children:(0,n.jsx)(l.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(a.z,{size:"sm",variant:"danger",disabled:0===s,onClick:o,loading:t,children:(0,n.jsx)(l.Z,{defaultMessage:"Delete <hidden>{space}Selected</hidden>",id:"QE60Po3yK8",values:{space:(0,n.jsx)(n.Fragment,{children:"\xa0"}),hidden:e=>(0,n.jsxs)("span",{className:"max-sm:hidden",children:[" ",e]})}})})]})}}}]);